<!DOCTYPE html>
<html lang="ru">
<head>
  <!-- Base64 threshold helper -->
  <script>
  const BASE64_THRESHOLD = 100 * 1024; 

  function getImageSrc(file) {
    return new Promise((resolve, reject) => {
      if (file.size <= BASE64_THRESHOLD) {
        const reader = new FileReader();
        reader.onload  = () => resolve(reader.result);
        reader.onerror = () => reject(new Error('Ошибка чтения файла'));
        reader.readAsDataURL(file);
      } else {
        resolve(URL.createObjectURL(file));
      }
    });
  }
</script>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Конструктор фотоколлажей</title>
  <style> :root {
     --primary-color:#4a90e2;
     --secondary-color:#3878C1;
     --border-color:#ddd;
     --text-color:#525252;
     --bg-color:#fafafa;
     --base-size:64px;
     --unified-border:2px solid #bbb;
}
/* ====== Базовая типографика конструктора ====== */

/* Базовый размер: html { font-size: 87.5%; } => 14px если 16px по умолчанию */

html {
  font-size: 87.5%;
}
@media all and (max-width: 768px) {
  html {
    font-size: 81.25%; /* 13px */
  }
}

/* Обычный текст */
body,
.text, .constructor-text, .collage-text, .collage-hint-text,
.text p, .constructor-text p, .collage-text p, .collage-hint-text p,
.text li, .constructor-text li, .collage-text li, .collage-hint-text li {
  font-size: 1em;
  line-height: 1.8571em;
  color: #525252;
  font-weight: 400;
}

/* Заголовки */
.h1, h1 { font-size: 3.14285714em; line-height: 1.31818182em; font-weight: 300; color: #262626; }
.h2, h2 { font-size: 2.35714286em; line-height: 1.35714286em; font-weight: 300; color: #262626; }
.h3, h3 { font-size: 1.78571429em; line-height: 1.5em; font-weight: 300; color: #262626; }
.h4, h4 { font-size: 1.35714286em; line-height: 1.36842105em; font-weight: 300; color: #262626; }
.h5, h5 { font-size: 1em;         line-height: 1.8571em; font-weight: 300; color: #262626; }
.h6, h6 { font-size: 0.85714286em;line-height: 2.16666667em; font-weight: 300; color: #262626; }

/* Lead — крупный абзац */
.lead {
  font-size: 1.35714286em;
  line-height: 1.68421053em;
  color: #525252;
  font-weight: 400;
  margin-bottom: 1.5em;
}

/* Цветовые классы */
.color--primary { color: #3878C1 !important; }
.color--dark    { color: #262626 !important; }
.color--white   { color: #fff !important; }
.color--error   { color: #e23636 !important; }
.color--success { color: #4ebf56 !important; }

/* Списки */
ul, ol, .text ul, .constructor-text ul, .collage-text ul, .collage-hint-text ul,
.text ol, .constructor-text ol, .collage-text ol, .collage-hint-text ol {
  margin: 0 0 1.8571em 0;
  padding-left: 1.2em;
}
ul, .text ul, .constructor-text ul, .collage-text ul, .collage-hint-text ul { list-style: disc inside; }
ol, .text ol, .constructor-text ol, .collage-text ol, .collage-hint-text ol { list-style: decimal inside; }

strong, b,
.text strong, .text b,
.constructor-text strong, .constructor-text b,
.collage-text strong, .collage-text b,
.collage-hint-text strong, .collage-hint-text b {
  font-weight: 600;
}

/* Ссылки */
a, .text a, .constructor-text a, .collage-text a, .collage-hint-text a {
  color: #3878C1;
  text-decoration: none;
}
a:hover, .text a:hover, .constructor-text a:hover, .collage-text a:hover, .collage-hint-text a:hover {
  text-decoration: underline;
}

/* Медиазапросы для заголовков и .lead */
@media all and (max-width: 767px) {
  .h1, h1 { font-size: 2.35714286em; line-height: 1.35714286em; }
  .h2, h2 { font-size: 1.78571429em; line-height: 1.5em; }
  .h3, h3 { font-size: 1.35714286em; line-height: 1.68421053em; }
  .lead  { font-size: 1.35714286em; line-height: 1.36842105em; }
}


 * {
     box-sizing:border-box;
     margin:0;
     padding:0;
}
 body {
     font-family: system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif;
     color:var(--text-color);
     display:flex;
     flex-direction:column;
     height:100vh;
     background:var(--bg-color);
}
 .main-area {
     flex:1;
     display:flex;
     flex-direction:column;
     align-items:center;
     justify-content:center;
     padding:5px;
     overflow:auto;
}
 @media (pointer: coarse), (max-width:1023px){
     .main-area{
         overflow-x: hidden;
         overflow-y: auto;
         overscroll-behavior-inline: contain;
    }
}
 .main-area > *{
     min-width:0;
}
 .collage-preview {
  position: relative;
  width: 100%;
  max-width: 1100px;
  max-height: 650px;
  aspect-ratio: 4 / 3;
  margin: 0 auto;
  overflow: hidden;
  background: #fff;
  border: 2px solid var(--border-color);
  border-radius: 0;
  will-change: transform;
  overscroll-behavior: contain;
}
@media (max-width: 600px) {
  .collage-preview {
    width: 98vw;
    max-width: 98vw;
    min-width: 0;
    border-width: 1px;
  }
}
.collage-cell {
  position: absolute;
  background: #fff;
  border: 2px solid var(--border-color);
  border-radius: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  color: #bbb;
  overflow: hidden;
  min-width: 0;
  min-height: 0;
  text-align: center;
  margin: 0;
  padding: 0;
  transition: border-color .13s;
}

/* Highlight state */
.collage-cell.highlight {
  background: #eaf4ff;
}

/* Placeholder внутри */
.collage-cell .placeholder {
  font-size: 0.8rem;
  color: #888;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Сброс padding/margin внутри ячейки */
.collage-cell > * {
  margin: 0;
  padding: 0;
}

 .thumbnails-container {
    display: flex;
    gap: 8px;
    padding: 12px;
    overflow-x: auto;
    margin-top: 10px;
    touch-action: pan-x;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    scroll-snap-type: x mandatory;
    overscroll-behavior-inline: contain;
    width: 100%;
    max-width: 100%;
    align-self: stretch;
    will-change: scroll-position;
    contain: layout paint;
}
@media (min-width: 1024px) {
    .thumbnails-container {
        flex: 0 0 120px;
        flex-direction: column;
        height: 100%;
        margin-left: 10px;
        overflow-y: auto;
        overflow-x: hidden;
        background: none;
        border: none;
        padding: 0;
        touch-action: pan-y;
    }
}

/* Скрытие в режиме handmode */
#thumbnails.hidden-by-handmode,
.thumbnails-container.hidden-by-handmode {
    opacity: 0 !important;
    pointer-events: none !important;
    transition: opacity 0.2s;
    height: 0 !important;
    min-height: 0 !important;
    max-height: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
}


 .collage-cell-img {
     position: absolute;
     transform-origin: top left;
     pointer-events: all;
     cursor: grab;
     z-index: 1;
     will-change: transform;
     touch-action: pan-x pan-y pinch-zoom !important;
}
 .thumbnail {
     width: 80px !important;
     height: 80px !important;
     object-fit: cover;
     border-radius: 4px;
     border: 1px solid var(--border-color);
     flex-shrink: 0;
     background: #fff;
}
 .thumbnail-container{
     position:relative;
     display:inline-block;
     scroll-snap-align:start;
}
 .thumbnail-remove, .remove-btn {
     position: absolute;
     top: 2px;
     right: 2px;
     width: 24px;
     height: 24px;
     background: #4a90e2 !important;
     color: #fff !important;
     border: none;
     border-radius: 50%;
     display: flex;
     align-items: center;
     justify-content: center;
     font-size: 14px;
     line-height: 1;
     cursor: pointer;
     z-index: 5;
     padding: 0;
}
 .control-panel {
     background:white;
     border-top:1px solid var(--border-color);
     padding:12px;
     display:flex;
     flex-direction:column;
}
 .tab-inner {
     display:flex;
     flex-direction:column;
     align-items:center;
     justify-content:center;
     gap:4px;
}
 .tab-inner .icon, .tab-inner .format-shape {
     width:40px;
     height:40px;
}
 .tab-inner .label, .tab-inner .option-label, .tab-inner label {
     font-size:16px;
     text-align:center;
     line-height:1.2;
}
 @media (max-width:768px){
     .tab-inner .icon, .tab-inner .format-shape{
        width:30px;
         height:30px;
    }
     .tab-inner .label, .tab-inner .option-label, .tab-inner label{
        font-size:14px;
    }
}
 .input-wrapper {
     display:flex;
     align-items:center;
     flex-wrap:nowrap;
     gap:8px;
     white-space:nowrap;
}
 @media (max-width:768px){
     .input-wrapper{
        gap:4px;
         font-size:14px;
    }
}
 .tabs {
     display:flex;
     border-bottom:1px solid var(--border-color);
     margin-bottom:12px;
     overflow-x:auto;
     scrollbar-width:none;
     justify-content: center;
}
 .tabs::-webkit-scrollbar{
    display:none;
}
 .tab {
     padding:8px 16px;
     cursor:pointer;
     border-bottom:2px solid transparent;
     white-space:nowrap;
     flex-shrink:0;
     text-align:center;
}
 .tab.active {
     border-bottom-color:var(--primary-color);
     color:var(--primary-color);
     font-weight:500;
}
 .tab-content {
     display:none;
     min-height:180px;
     text-align:center;
}
 .tab-content.active {
     display:block;
}
 .form-group {
     margin-bottom:12px;
}
 label {
     display:block;
     margin-bottom:4px;
     font-size:14px;
     text-align:center;
}
 input[type="range"],input[type="color"],select{
    width:100%;
    padding:8px;
    border-radius:4px;
    border:1px solid var(--border-color);
}
 .action-buttons {
    display: flex;
    gap: 8px;
    margin-top: 16px;
    justify-content: center;
    align-items: center;
    flex-wrap: nowrap;
}
@media (max-width: 600px) {
    .action-buttons {
        gap: 4px;
        margin-top: 8px;
    }
}


 .btn {
     padding:10px 16px;
     border-radius:4px;
     border:none;
     cursor:pointer;
     font-weight:500;
     font-family:inherit;
}
 .btn-primary {
     background:var(--primary-color);
     color:white;
}
 .btn-secondary {
     background:var(--secondary-color);
     color:white;
}
 #upload-container {
     display:flex;
     flex-direction:column;
     align-items:center;
     justify-content:center;
     height:100%;
}
 #upload-btn {
     width:90px;
     height:90px;
     border-radius:50%;
     display:flex;
     align-items:center;
     justify-content:center;
     background:var(--secondary-color);
     color:white;
     border:none;
     cursor:pointer;
     margin:0 auto;
}
 .upload-plus {
     font-size:30px;
     display:inline-block;
     transform:translateY(-1px);
}
 #upload-btn::after {
     content:"Выбрать фото";
     display:block;
     font-size:0;
     width:0;
     height:0;
     overflow:hidden;
}
 #upload-label {
     margin-top:8px;
     text-align:center;
     font-size:14px;
     color:var(--text-color);
}
 @media (min-width:769px){
     #upload-label{
        visibility:hidden;
        position:relative;
    }
     #upload-label::after{
        content:"Нажмите или перетащите сюда фото";
        visibility:visible;
        position:absolute;
        left:50%;
        top:0;
        transform:translateX(-50%);
        color:var(--text-color);
        white-space:nowrap;
    }
}
 #format-tabs {
     display: flex;
     gap: 6px;
     align-items: center;
     overflow-x: auto;
     -webkit-overflow-scrolling: touch;
     scroll-behavior: smooth;
     padding: 10px;
     height: 110px;
     width: 100%;
     scrollbar-width: none;
     -ms-overflow-style: none;
     justify-content: flex-start;
     scroll-padding-left: 10px;
}
 #format-tabs::-webkit-scrollbar {
     display: none;
}
 @media (min-width: 1024px) {
     #format-tabs {
         justify-content: center;
         scroll-padding-left: 0;
    }
}
 @media (pointer: coarse), (max-width: 1023px) {
     #format-tabs {
         touch-action: pan-x;
    }
}
 .format-btn {
     flex:0 0 auto;
     width:90px;
     background:transparent;
     padding:0;
     border-radius:8px;
     border:none;
     cursor:pointer;
     display:flex;
     flex-direction:column;
     align-items:center;
     margin:0 4px;
}
 .format-shape {
     display:block;
     background:#e0e0e0;
     border-radius:7px;
     border:2px solid #bbb;
     margin-bottom:6px;
     min-width:16px;
     min-height:16px;
     position:relative;
}
 .format-btn.selected .format-shape {
     background:white;
     border-color:var(--primary-color);
}
 .format-btn .option-label {
     text-align:center;
     font-size:13px;
     color:#444;
     margin-top:3px;
}
 .count-buttons {
     display: flex;
     gap: 10px;
     flex-wrap: nowrap;
     overflow-x: auto;
     -webkit-overflow-scrolling: touch;
     scroll-behavior: smooth;
     padding: 10px 0;
     width: 100%;
     scrollbar-width: none;
     -ms-overflow-style: none;
     justify-content: flex-start;
     align-items: center;
}
 .count-buttons::-webkit-scrollbar {
     display: none;
}
 .count-btn {
     width: 80px;
     height: 60px;
     border-radius: 4px;
     border: 1px solid var(--border-color);
     background: #f5f5f5;
     cursor: pointer;
     font-size: 18px;
     display: flex;
     align-items: center;
     justify-content: center;
     flex-shrink: 0;
     transition: background 0.15s, color 0.15s, border 0.15s;
}
 .count-btn.selected {
     background: white;
     border-color: var(--primary-color);
     color: var(--primary-color);
     font-weight: 500;
}
 @media (max-width: 768px) {
     .count-btn {
         width: 64px;
         height: 50px;
         font-size: 15px;
    }
}
 .grid-templates {
     display: flex;
     gap: 12px;
     margin-top: 8px;
     overflow-x: auto;
     padding-bottom: 10px;
     scrollbar-width: none;
     height: 90px;
     align-items: center;
     justify-content: center;
}
 @media (max-width: 600px) {
     .grid-templates {
         justify-content: flex-start;
    }
}
 @media (min-width: 601px) {
     .grid-templates {
         justify-content: center;
    }
}
 .grid-templates::-webkit-scrollbar{
    display:none;
}
 .grid-template {
     flex:0 0 auto;
     width:80px;
     height:80px;
     padding:4px;
     border-radius:8px;
     border:1px solid var(--border-color);
     cursor:pointer;
     display:flex;
     align-items:center;
     justify-content:center;
}
 .grid-template:hover{
    border-color:var(--primary-color);
}
 .grid-template svg {
     width:80%;
     height:80%;
     display:block;
}
 .grid-template.selected {
     border-color:var(--primary-color);
     background:#f0f7ff;
}
 .drag-ghost {
     position: fixed;
     pointer-events: none;
     z-index: 10000;
     border-radius: 6px;
     box-shadow: 0 2px 12px rgba(0,0,0,0.2);
     transition: none;
     opacity: 0.85;
     will-change: transform;
     transform: translateZ(0);
}
 #preview-modal {
     display:none;
     position:fixed;
     z-index:10000;
     left:0;
     top:0;
     width:100vw;
     height:100vh;
     background:rgba(24,36,55,.82);
     align-items:center;
     justify-content:center;
}
 #preview-modal > div {
     background:#fff;
     padding:16px 18px 18px 18px;
     position:relative;
     max-width:99vw;
     max-height:97vh;
     box-shadow:0 8px 32px #2224;
}
 #preview-close {
     position:absolute;
     top:7px;
     right:8px;
     background:#eaf4ff;
     border:none;
     border-radius:50%;
     width:32px;
     height:32px;
     font-size:18px;
     cursor:pointer;
}
 @media (max-width:768px){
     .control-panel{
        scroll-behavior:smooth;
    }
     #upload-btn{
        width:80px;
        height:80px;
    }
     .count-btn{
        width:50px;
        height:50px;
        font-size:14px;
    }
     .grid-template{
        width:80px;
        height:80px;
    }
     #format-tabs{
        height:90px;
    }
     .format-btn{
        width:80px;
    }
     .format-shape{
        width:60px;
        height:60px;
    }
}
 @media (max-width:768px){
     body{
        height:auto;
        min-height:100vh;
    }
     .main-area{
        order:1;
        padding:10px;
    }
     .control-panel{
        order:2;
    }
     .tab-content{
        min-height:160px;
    }
}
 @media (min-width:769px){
     #upload-label{
        visibility:hidden;
        position:relative;
    }
     #upload-label::after{
        content:"Нажмите или перетащите сюда фото";
        visibility:visible;
        position:absolute;
        left:50%;
        top:0;
        transform:translateX(-50%);
        color:var(--text-color);
    }
}
 @media (max-width:768px){
     #hidden-color-picker-2{
        display:none !important;
    }
}

 @media (pointer: coarse), (max-width:1023px){
     .thumbnail{
        touch-action:pan-x !important;
    }
}
 .thumbnail img, .cell-image img, .drag-image{
    will-change:transform;
    transform:translateZ(0);
}
 #preview-download {
    white-space:nowrap;
    display:inline-block;
    width:auto;
}
 .aspect-1-1 {
     aspect-ratio: 1 / 1;
}
 .aspect-4-3 {
     aspect-ratio: 4 / 3;
}
 .aspect-3-4 {
     aspect-ratio: 3 / 4;
}
 .aspect-3-2 {
     aspect-ratio: 3 / 2;
}
 .aspect-2-3 {
     aspect-ratio: 2 / 3;
}
 .aspect-1-2 {
     aspect-ratio: 1 / 2;
}
 .aspect-2-1 {
     aspect-ratio: 2 / 1;
}
 .aspect-1-3 {
     aspect-ratio: 1 / 3;
}
 .aspect-3-1 {
     aspect-ratio: 3 / 1;
}
 .collage-cell.r1-1 {
     height: 0;
     padding-top: calc(100% * 1 / 1);
}
 .collage-cell.r4-3 {
     height: 0;
     padding-top: calc(100% * 3 / 4);
}
 .collage-cell.r3-4 {
     height: 0;
     padding-top: calc(100% * 4 / 3);
}
 .collage-cell.r3-2 {
     height: 0;
     padding-top: calc(100% * 2 / 3);
}
 .collage-cell.r2-3 {
     height: 0;
     padding-top: calc(100% * 3 / 2);
}
 .collage-cell.r1-2 {
     height: 0;
     padding-top: calc(100% * 2 / 1);
}
 .collage-cell.r2-1 {
     height: 0;
     padding-top: calc(100% * 1 / 2);
}
 .collage-cell.r1-3 {
     height: 0;
     padding-top: calc(100% * 3 / 1);
}
 .collage-cell.r3-1 {
     height: 0;
     padding-top: calc(100% * 1 / 3);
}
 .collage-cell > * {
     position:absolute;
     top:0;
     left:0;
     width:100%;
     height:100%;
}
 @media (min-width:1024px){
     .main-area{
        display:flex !important;
        flex-direction:row !important;
        align-items:center !important;
        height:100vh !important;
    }    
}
 
 
 @media (min-width:1024px){
     .collage-preview{
        border:2px solid var(--border-color) !important;
    }
}

 html, body{
     overflow-x: hidden;
}
 #zoom-btn {
     position: fixed;
     bottom: 16px;
     right: 16px;
     background: none;
     border: none;
     box-shadow: none;
     border-radius: 0;
     padding: 4px;
     z-index: 10000;
     cursor: pointer;
}
 #zoom-btn svg {
     width: 50px;
     height: 50px;
}
 .help-desktop {
     display: block;
}
 .help-mobile {
     display: none;
}
 @media (pointer: coarse), (hover: none) {
     .help-desktop {
         display: none;
    }
     .help-mobile {
         display: block;
    }
}
 #help-tab .tab-inner {
     max-width: 640px;
     margin: 0 auto;
     padding: 0 12px;
}
 #help-tab h3 {
     margin: 0 0 12px;
     font-size: 1.2rem;
     text-align: center;
}
 #help-tab .help-steps {
     margin: 0;
     padding-left: 0;
     list-style-position: inside;
     text-align: left;
     line-height: 1.4;
     font-size: 0.95rem;
}
 @keyframes fadeShrink {
     to {
         transform: scale(.7);
         opacity: 0;
    }
}
 .collage-cell-img.delete-anim {
     animation: fadeShrink 180ms ease-out forwards;
     pointer-events: none;
}
 .cell-remove {
     position: absolute;
     top: 6px;
     right: 6px;
     width: 28px;
     height: 28px;
     background: #4a90e2;
     color: #fff;
     border: none;
     border-radius: 50%;
     display: flex;
     align-items: center;
     justify-content: center;
     font-size: 18px;
     cursor: pointer;
     z-index: 10;
     opacity: 0.85;
     pointer-events: auto;
     transition: opacity 0.15s;
}
 @media (pointer: coarse), (hover: none) {
     .collage-cell .cell-remove {
         opacity: 0 !important;
         pointer-events: none !important;
    }
}


 .zoom-controls-inline {
     display: flex;
     align-items: center;
     gap: 8px;
}
 .zoom-btn {
     font-size: 1.4rem;
     width: 36px;
     height: 36px;
     background: var(--primary-color);
     color: #fff;
     border: none;
     border-radius: 8px;
     cursor: pointer;
     font-weight: bold;
     transition: background 0.2s;
     display: flex;
     align-items: center;
     justify-content: center;
}
 .zoom-btn:active {
     background: var(--secondary-color);
}
 #zoom-value {
     min-width: 44px;
     text-align: center;
     font-size: 1.1rem;
     color: var(--primary-color);
     font-weight: bold;
     background: #fff;
     border-radius: 6px;
     padding: 0 4px;
}
 @media (max-width: 768px) {
     .zoom-btn {
         width: 32px;
         height: 32px;
         font-size: 1.1rem;
    }
     #zoom-value {
         min-width: 32px;
         font-size: 1rem;
    }
}
 @media (min-width: 1024px) {
     .count-buttons {
         justify-content: center;
    }
}
 #layout-tab .tab-inner, #layout-tab .grid-templates {
     align-items: stretch !important;
     width: 100%;
     min-width: 0;
}
 .hand-panel {
     position: fixed;
     left: 24px;
     top: auto;
     bottom: 24px;
     z-index: 20000;
     display: flex;
     align-items: center;
     gap: 10px;
     padding: 7px 18px;
     min-width: 64px;
     background: #fff;
     border-radius: 18px;
     box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
     transition: background 0.22s;
}
 .hand-panel.active {
     background: #4a90e2;
}
 .hand-btn {
     width: 36px;
     height: 36px;
     padding: 0;
     background: none;
     border: none;
     outline: none;
     box-shadow: none;
     cursor: pointer;
     display: flex;
     align-items: center;
     justify-content: center;
}
 .hand-panel .hand-btn svg path {
     fill: #4a90e2 !important;
     stroke: #4a90e2 !important;
     stroke-width: 20px !important;
     transition: fill 0.22s, stroke 0.22s;
}
 .hand-panel.active .hand-btn svg path {
     fill: #fff !important;
     stroke: #fff !important;
     stroke-width: 8px !important;
}
 .zoom-value, #zoom-value {
     min-width: 36px;
     margin-left: 10px;
     font-size: 1.06em;
     font-weight: bold;
     text-align: right;
     display: inline-block;
     background: none !important;
     padding: 0 !important;
     box-shadow: none !important;
     transition: color 0.18s;
}
 .zoom-value {
     color: #3878C1;
}
 .zoom-value:hover {
     text-decoration-color:#3878C1;
}
 .hand-panel.active .zoom-value {
     color: #fff !important;
}
 #thumbnails.hidden-by-handmode, .thumbnails-container.hidden-by-handmode {
     opacity: 0 !important;
     pointer-events: none !important;
     transition: opacity 0.2s;
     height: 0 !important;
     min-height: 0 !important;
     max-height: 0 !important;
     padding: 0 !important;
     overflow: hidden !important;
}
 .main-area.handmode-active {
     padding-bottom: 0 !important;
     margin-bottom: 0 !important;
}

 .zoom-reset-btn {
     background: none;
     border: none;
     padding: 0 0 0 8px;
     cursor: pointer;
     outline: none;
     display: flex;
     align-items: center;
     opacity: 0.82;
     transition: opacity 0.15s;
}
 .zoom-reset-btn:hover, .zoom-reset-btn:focus {
     opacity: 1;
}
 .hand-panel.active .zoom-reset-btn svg path, .hand-panel.active .zoom-reset-btn svg polyline {
     stroke: #fff;
}
 
 .collage-cell .cell-remove {
     left: auto !important;
     right: 6px !important;
}

 
 @media (max-width: 700px) {
     .hand-panel {
         left: auto;
         right: 12px;
         top: 12px;
         bottom: auto;
    }
}
 @media (max-width: 700px) {
     .grid-resize-handle {
         display: none !important;
    }
}
.tabs {
    display: flex;
    justify-content: center;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 12px;
    overflow-x: auto;
    scrollbar-width: none;
    padding-bottom: 0;
}
.tabs::-webkit-scrollbar {
    display: none;
}
.tab {
    padding: 8px 16px;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    white-space: nowrap;
    flex-shrink: 0;
    text-align: center;
    background: none;
    border-radius: 0;
    transition: color 0.15s, border-bottom-color 0.15s;
}
.tab.active {
    border-bottom-color: var(--primary-color);
    color: var(--primary-color);
    font-weight: 500;
}
.tab-content {
    display: none;
    min-height: 180px;
    text-align: center;
}
.tab-content.active {
    display: block;
}

/* Мобильные — делаем табы компактнее */
@media (max-width: 768px) {
    .tabs {
        padding-bottom: 5px;
        margin-bottom: 8px;
    }
    .tab {
        padding: 8px 10px;
    }
}
/* Десктоп — убираем бордер и маргин если не нужны */
@media (min-width: 1024px) {
    .tabs {
        border-bottom: none;
        margin-bottom: 0;
    }
}
/* === АДАПТИВ ДЛЯ КОЛЛАЖА === */
@media (max-width: 600px) {
  html, body {
    overflow-x: hidden;
  }
  .main-area {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 10px 0;
    width: 100vw;
    margin: 0;
  }
  .collage-preview {
    width: 98vw !important;
    max-width: 98vw !important;
    margin: 0 auto;
    left: auto !important;
    transform: none !important;
  }
}

@media (min-width: 601px) and (max-width: 1023px) {
  .main-area {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding-top: 30px;
    height: calc(100vh - 200px);
  }
}

@media (min-width: 1024px) {
  .main-area {
    display: flex !important;
    flex-direction: row !important;
    justify-content: center !important;
    align-items: flex-start !important;
    padding-top: 40px;
    height: calc(100vh - 220px); /* 220px ≈ высота табов + отступы */
  }
}
#collage-hint {
  /* Делаем область ровно такой же, как у коллажа */
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 420px;         /* подбери под твой дизайн */
  aspect-ratio: 4/3;
  margin: 0 auto;
  background: none;
  border: none;
  box-shadow: none;
}

.collage-hint-text {
  text-align: left;
  width: 100%;
  max-width: 900px;
  margin: 0 auto;
  padding: 0 32px;
  background: none;
  box-shadow: none;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  box-sizing: border-box;
}

@media (max-width: 600px) {
  #collage-hint {
    min-height: 180px;
    aspect-ratio: unset;
    width: 100vw !important;
    margin: 0 auto;
    overflow: hidden;
    align-items: flex-start;      /* ← вот эти две строки */
    justify-content: flex-start;  /* ← вот эти две строки */
  }
  .collage-hint-text {
    margin-top: 32px;
    max-width: 98vw;
    width: 100%;
    padding-left: 8px;
    padding-right: 8px;  
    box-sizing: border-box;
    word-break: break-word;
    overflow-wrap: anywhere;
  }
}


/* --- Переключение текста для десктопа и мобилки --- */
.hint-desktop { display: block; }
.hint-mobile  { display: none; }

@media (max-width: 900px) {
  .collage-hint-text {
    max-width: 99vw;
    padding: 0 12px;
  }
  .hint-desktop { display: none; }
  .hint-mobile  { display: block; }
}




 </style>
<script>
function processImage(src, originalSize) {
  return new Promise((resolve, reject) => {
    const img = new Image();
    img.onload = () => {
      const maxDim = 1024;
      const w = img.width;
      const h = img.height;

      if (w <= maxDim && h <= maxDim) {
        resolve(src);
        return;
      }

      const scale = Math.min(maxDim / w, maxDim / h);
      const rw = Math.round(w * scale);
      const rh = Math.round(h * scale);
      const canvas = document.createElement('canvas');
      canvas.width  = rw;
      canvas.height = rh;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(img, 0, 0, rw, rh);
      const quality = originalSize > 5 * 1024 * 1024 ? 0.6 : 0.8;
      canvas.toBlob(blob => {
        const reader = new FileReader();
        reader.onload  = () => resolve(reader.result);
        reader.onerror = () => reject(new Error('Canvas toBlob error'));
        reader.readAsDataURL(blob);
      }, 'image/webp', quality);
    };
    img.onerror = () => reject(new Error('Image load error'));
    img.src = src;
  });
}
</script>
<style>
body.drag-over {
  outline: 3px dashed var(--primary-color);
  background: rgba(74,144,226,0.05);
}
</style>
</head>
<body>
 <div class="hand-panel" id="hand-panel">
   <!-- Кнопка "рука" (пример с SVG-иконкой) -->
   <button class="hand-btn" id="hand-mode-btn" aria-label="Режим перемещения">
      <svg width="28" height="28" viewBox="0 0 100 100" fill="none">
         <g transform="translate(0,100) scale(0.1,-0.1)">
            <path d="M465 975 c-14 -13 -25 -33 -25 -44 0 -17 -5 -19 -34 -14 -28 4 -39 1 -60 -20 l-26 -26 0 -228 -1 -228 -44 50 c-39 45 -48 50 -85 50 -34 0 -47 -6 -66 -28 -38 -45 -31 -75 36 -164 250 -329 242 -323 417 -323 155 0 206 22 244 105 17 36 19 71 19 363 0 267 -3 328 -15 352 -16 32 -45 45 -79 36 -21 -5 -24 -1 -30 34 -8 48 -41 74 -87 68 -23 -4 -37 1 -55 19 -31 31 -77 30 -109 -2z m83 -27 c8 -8 12 -67 12 -200 0 -181 1 -188 20 -188 19 0 20 8 22 171 3 151 5 173 21 183 12 8 22 8 35 0 15 -10 17 -33 20 -203 2 -182 3 -191 22 -191 18 0 20 9 22 141 3 122 5 143 21 153 12 8 22 8 35 0 15 -10 17 -39 20 -335 2 -357 1 -368 -61 -413 -25 -19 -43 -21 -162 -21 -128 0 -134 1 -160 25 -45 41 -275 341 -275 358 0 22 30 52 51 52 10 0 44 -30 75 -67 90 -107 88 -111 94 191 4 232 7 260 23 270 12 8 22 8 35 0 15 -10 17 -32 20 -173 2 -153 4 -161 22 -161 19 0 20 7 20 198 0 203 3 222 40 222 9 0 21 -5 28 -12z"/>
         </g>
      </svg>
   </button>
   <!-- Текущий масштаб -->
   <span class="zoom-value" id="zoom-value" title="Кликните, чтобы сбросить масштаб">100%</span>
   <!-- Кнопка сброса масштаба -->
   <button id="zoom-reset-btn" title="Сбросить масштаб к 100%" class="zoom-reset-btn" tabindex="0" aria-label="Сбросить масштаб">
      <svg width="22" height="22" viewBox="0 0 22 22">
         <path d="M4 12a7 7 0 1 0 2-5" fill="none" stroke="#4a90e2" stroke-width="2" stroke-linecap="round"/>
         <polyline points="2,8 4,12 8,10" fill="none" stroke="#4a90e2" stroke-width="2" stroke-linecap="round"/>
      </svg>
   </button>
</div>
<!-- Основная рабочая область: коллаж и миниатюры под ним -->
<div class="main-area" id="drag-zone">
   <div class="collage-hint" id="collage-hint">
      <div class="collage-hint-text">
         <div class="hint-desktop">
           <h2 style="text-align:center; width:100%; align-self:center; display:block; margin-bottom:1em;">Как создать фотоколлаж</h2>
            <ul class="lead">
               <li>Загрузите фотографии (перетащите или выберите) — <b>вкладка «Фото»</b>.</li>
               <li>Выберите формат (пропорции) — <b>вкладка «Формат»</b>.</li>
               <li>Выберите количество фото и макет — <b>вкладка «Макет»</b>.</li>
               <li>Перетащите фото в ячейки макета.</li>
               <li>Перемещайте и увеличивайте фото внутри ячеек мышью (масштабируйте колесиком).</li>
               <li>Чтобы удалить фото — нажмите крестик в углу ячейки.</li>
               <li>Чтобы изменить размер ячейки — перетащите стрелку на её границе (стрелки есть не во всех макетах).</li>
               <li>Включите режим «рука», чтобы сдвигать и увеличивать весь коллаж.<br>
                    <span style="font-size:13px; line-height:1.86; color:#665;">
                  В этом режиме нельзя редактировать фото и скрыта лента миниатюр.
                  Чтобы вернуться к редактированию — выключите «руку».
                  </span>
               </li>
               <li>Настройте фон и отступы — <b>вкладка «Стиль»</b>.</li>
               <li>Скачайте результат в&nbsp;окне предпросмотра (кнопка «Скачать»).</li>
            </ul>
         </div>
         <div class="hint-mobile">
            <h2 style="text-align:center; width:100%; align-self:center; display:block; margin-bottom:1em;">Как создать фотоколлаж</h2>
            <ul>
               <li>Добавьте фотографии (“+” во&nbsp;<b>вкладке «Фото»</b>).</li>
               <li>Выберите формат (пропорции) — <b>вкладка «Формат»</b>.</li>
               <li>Выберите количество фото и макет — <b>вкладка «Макет»</b>.</li>
               <li>Перетащите фото в ячейки макета.</li>
               <li>Перемещайте и увеличивайте фото двумя пальцами.</li>
               <li>Чтобы удалить фото — дважды коснитесь его в коллаже.</li>
               <li>Включите режим «рука», чтобы двигать и увеличивать весь коллаж.<br>
                  <span style="color:#665; font-size:0.95em">
                  В этом режиме нельзя редактировать фото и скрыта лента миниатюр.
                  Чтобы вернуться к редактированию — выключите «руку».
                  </span>
               </li>
               <li>Настройте фон и отступы — <b>вкладка «Стиль»</b>.</li>
               <li>Скачайте результат через предпросмотр (кнопка «Скачать»).</li>
            </ul>
         </div>
      </div>
   </div>
   <div class="collage-preview" id="collage-preview">
      <!-- Ячейки коллажа будут рендериться здесь -->
   </div>
   <!-- Блок миниатюр (загруженных фото) -->
   <div class="thumbnails-container" id="thumbnails">
      <!-- Миниатюры добавляются сюда -->
   </div>
</div>
<!-- Панель управления (с табами) -->
<div class="control-panel">
   <div class="tabs">
      <div class="tab active" data-tab="upload">Фото</div>
      <div class="tab" data-tab="format">Формат</div>
      <div class="tab" data-tab="layout">Макет</div>
      <div class="tab" data-tab="style">Стиль</div>
      <div class="tab" data-tab="help">?</div>
   </div>
   <!-- Вкладка "Фото" -->
   <div class="tab-content active" id="upload-tab">
      <div id="upload-container">
         <button class="btn btn-secondary" id="upload-btn">
         <span class="upload-plus">+</span>
         </button>
         <div class="tab-inner">
            <div id="upload-label">Загрузить фото</div>
            <input accept="image/*" id="file-input" multiple style="display: none;" type="file"/>
         </div>
      </div>
   </div>
   <!-- Вкладка "Формат коллажа" -->
   <div class="tab-content" id="format-tab">
      <div class="form-group">
         <div class="tab-inner">
            <div id="format-tabs">
               <button class="format-btn selected" data-ratio="4:3">
                  <div class="format-shape icon" data-x="4" data-y="3"></div>
                  <div class="option-label label">4:3</div>
               </button>
               <button class="format-btn" data-ratio="3:2">
                  <div class="format-shape icon" data-x="3" data-y="2"></div>
                  <div class="option-label label">3:2</div>
               </button>
               <button class="format-btn" data-ratio="1:1">
                  <div class="format-shape icon" data-x="1" data-y="1"></div>
                  <div class="option-label label">1:1</div>
               </button>
               <button class="format-btn" data-ratio="2:3">
                  <div class="format-shape icon" data-x="2" data-y="3"></div>
                  <div class="option-label label">2:3</div>
               </button>
               <button class="format-btn" data-ratio="3:4">
                  <div class="format-shape icon" data-x="3" data-y="4"></div>
                  <div class="option-label label">3:4</div>
               </button>
               <button class="format-btn" data-ratio="1:2">
                  <div class="format-shape icon" data-x="1" data-y="2"></div>
                  <div class="option-label label">1:2</div>
               </button>
               <button class="format-btn" data-ratio="2:1">
                  <div class="format-shape icon" data-x="2" data-y="1"></div>
                  <div class="option-label label">2:1</div>
               </button>
               <button class="format-btn" data-ratio="3:1">
                  <div class="format-shape icon" data-x="3" data-y="1"></div>
                  <div class="option-label label">3:1</div>
               </button>
               <button class="format-btn" data-ratio="1:3">
                  <div class="format-shape icon" data-x="1" data-y="3"></div>
                  <div class="option-label label">1:3</div>
               </button>
            </div>
         </div>
      </div>
   </div>
   <!-- Вкладка "Сетка" -->
   <div class="tab-content" id="layout-tab">
      <div class="form-group">
         <div class="tab-inner">
            <div class="count-buttons">
               <button class="count-btn selected" data-count="3">3</button>
               <button class="count-btn" data-count="4">4</button>
               <button class="count-btn" data-count="5">5</button>
               <button class="count-btn" data-count="6">6</button>
               <button class="count-btn" data-count="7">7</button>
               <button class="count-btn" data-count="8">8</button>
               <button class="count-btn" data-count="9">9</button>
               <button class="count-btn" data-count="12">12</button>
               <button class="count-btn" data-count="13">13</button>
               <button class="count-btn" data-count="17">17</button>
            </div>
            <div class="grid-templates" id="grid-templates">
               <!-- Здесь будут добавляться шаблоны -->
            </div>
         </div>
      </div>
   </div>
   <!-- Вкладка "Стиль" -->
   <div class="tab-content" id="style-tab">
      <!-- Блок настройки расстояния между фото -->
      <div class="form-group">
         <div class="tab-inner">
            <div class="input-wrapper">
               <label for="spacing">Расстояние между фото</label>
               <input id="spacing" max="30" min="0" type="range" value="5"/>
               <span id="spacing-value">5</span>px
            </div>
         </div>
      </div>
      <!-- Перенесённый из "Цвет фона" блок выбора цвета -->
      <div class="form-group">
         <div class="tab-inner">
            <div class="color-presets" style="display: flex; gap: 12px; justify-content: center; padding: 12px 0;">
               <div class="color-preset selected" data-color="#ffffff" style="width: 40px; height: 40px; border-radius: 50%; background: #ffffff; border: 2px solid #bbb; cursor: pointer;"></div>
               <div class="color-preset" data-color="#f5f5f5" style="width: 40px; height: 40px; border-radius: 50%; background: #f5f5f5; border: 2px solid #bbb; cursor: pointer;"></div>
               <div class="color-preset" data-color="#e6e6e6" style="width: 40px; height: 40px; border-radius: 50%; background: #e6e6e6; border: 2px solid #bbb; cursor: pointer;"></div>
               <div class="color-preset" data-color="#333333" style="width: 40px; height: 40px; border-radius: 50%; background: #333333; border: 2px solid #bbb; cursor: pointer;"></div>
               <div class="color-preset" data-color="#000000" style="width: 40px; height: 40px; border-radius: 50%; background: #000000; border: 2px solid #bbb; cursor: pointer;"></div>
               <div class="color-preset rainbow" id="color-picker-2" title="Выбрать цвет" style="width: 40px; height: 40px; border-radius: 50%; background: conic-gradient(red, yellow, lime, cyan, blue, magenta, red); border: 2px solid #bbb; cursor: pointer; position: relative;">
                  <input id="hidden-color-picker-2" style="position: absolute; opacity: 0; width: 100%; height: 100%; cursor: pointer;" type="color"/>
               </div>
            </div>
            <label>Цвет фона</label>
         </div>
      </div>
   </div>
   <!-- Вкладка "?" (справка) -->
   <div class="tab-content" id="help-tab">
      <div class="form-group">
         <!-- Desktop version -->
         <div class="tab-inner help-desktop">
            <h3>Как создать коллаж</h3>
            <ul class="help-steps">
               <li>Загрузите фотографии (перетащите или выберите) — <b>вкладка «Фото»</b>.</li>
               <li>Выберите формат (пропорции) — <b>вкладка «Формат»</b>.</li>
               <li>Выберите количество фото и макет — <b>вкладка «Макет»</b>.</li>
               <li>Перетащите фото в ячейки макета.</li>
               <li>Перемещайте и увеличивайте фото внутри ячеек мышью (масштабируйте колесиком).</li>
               <li>Чтобы удалить фото — нажмите крестик в углу ячейки.</li>
               <li>Чтобы изменить размер ячейки — перетащите стрелку на её границе (стрелки есть не во всех макетах).</li>
               <li>Включите режим «рука», чтобы сдвигать и увеличивать весь коллаж.<br>
                  <span style="color:#665; font-size:0.95em">
                  В этом режиме нельзя редактировать фото и скрыта лента миниатюр.<br>
                  Чтобы вернуться к редактированию — выключите «руку».
                  </span>
               </li>
               <li>Настройте фон и отступы — <b>вкладка «Стиль»</b>.</li>
               <li>Скачайте результат в&nbsp;окне предпросмотра (кнопка «Скачать»).</li>
            </ul>
         </div>
         <!-- Mobile version -->
         <div class="tab-inner help-mobile">
            <h3>Как создать коллаж</h3>
            <ul class="help-steps">
               <li>Добавьте фотографии (“+” во&nbsp;<b>вкладке «Фото»</b>).</li>
               <li>Выберите формат (пропорции) — <b>вкладка «Формат»</b>.</li>
               <li>Выберите количество фото и макет — <b>вкладка «Макет»</b>.</li>
               <li>Перетащите фото в ячейки макета.</li>
               <li>Перемещайте и увеличивайте фото двумя пальцами.</li>
               <li>Чтобы удалить фото — дважды коснитесь его в коллаже.</li>
               <li>Включите режим «рука», чтобы двигать и увеличивать весь коллаж.<br>
                  <span style="color:#665; font-size:0.95em">
                  В этом режиме нельзя редактировать фото и скрыта лента миниатюр.<br>
                  Чтобы вернуться к редактированию — выключите «руку».
                  </span>
               </li>
               <li>Настройте фон и отступы — <b>вкладка «Стиль»</b>.</li>
               <li>Скачайте результат через предпросмотр (кнопка «Скачать»).</li>
            </ul>
         </div>
      </div>
   </div>
   <div class="action-buttons">
      <button class="btn btn-primary" id="preview-btn">Предпросмотр</button>
   </div>
</div>
<!-- Модальное окно для предпросмотра -->
<div id="preview-modal">
   <div>
      <button id="preview-close">×</button>
      <div style="text-align:center; margin-bottom:12px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
         <button class="btn btn-primary" id="preview-download">Скачать</button>
         <button class="btn btn-primary" id="preview-order" style="background:var(--secondary-color);">Заказать коллаж</button>
      </div>
      <div id="preview-canvas-container" style="text-align:center; max-width:90vw; max-height:75vh; overflow:auto;"></div>
   </div>
</div>
<script>
function isIOS() {
  return /iP(ad|hone|od)/.test(navigator.userAgent);
}

function blockIOSRubberBand() {
  if (!isIOS()) return;

  document.querySelectorAll('.collage-cell-img').forEach(img => {
    img.ontouchmove = null;
  });

  document.querySelectorAll('.collage-cell-img').forEach(img => {
    img.addEventListener('touchmove', e => e.preventDefault(), {
      passive: false
    });
  });
}

"use strict";
let handMode = false;
let collageTransform = {
  scale: 1,
  x: 0,
  y: 0
};

function updateZoomValue() {
  document.getElementById('zoom-value').textContent =
    Math.round(collageTransform.scale * 100) + '%';
}

function genId() {
  return 'img_' + Math.random().toString(36).substr(2, 9);
}

function addImageToCell(cell, imageId) {
  const imgObj = uploadedImages.find(x => x.id === imageId);
  if (!imgObj) return;
  const cellIndex = Array.from(cell.parentNode.children).indexOf(cell);
  collageCells[cellIndex] = {
    imageId: imgObj.id,
    scale: 1,
    tx: 0,
    ty: 0
  };
  renderCollage();
}

function applyCoverToImage(img) {
  const container = img.parentNode;
  const cw = container.clientWidth,
    ch = container.clientHeight;
  const iw = img.naturalWidth,
    ih = img.naturalHeight;

  img.style.width = `${iw}px`;
  img.style.height = `${ih}px`;

  const scale = Math.max(cw / iw, ch / ih);
  const minScale = Math.min(cw / iw, ch / ih);
  const x = (cw - iw * scale) / 2;
  const y = (ch - ih * scale) / 2;

  img._state = {
    scale,
    minScale,
    maxScale: scale * 4,
    x,
    y,
    isDragging: false,
    startX: 0,
    startY: 0
  };

  img.dataset.scale = scale;
  img.dataset.translateX = x;
  img.dataset.translateY = y;

  img.style.transform = `translate3d(${x}px,${y}px,0) scale(${scale})`;
  img.style.transformOrigin = 'top left';

}

function updateTransform(img) {
  const s = img._state;
  img.style.transform = `translate3d(${s.x}px,${s.y}px,0) scale(${s.scale})`;
  img.style.transformOrigin = 'top left';
}

function constrain(img) {
  const s = img._state;
  const container = img.parentElement;
  const cw = container.clientWidth;
  const ch = container.clientHeight;
  const iw = img.naturalWidth * s.scale;
  const ih = img.naturalHeight * s.scale;

  const minScale = Math.max(cw / img.naturalWidth, ch / img.naturalHeight);
  if (s.scale < minScale) s.scale = minScale;

  const minX = Math.min(0, cw - iw);
  const minY = Math.min(0, ch - ih);
  const maxX = 0;
  const maxY = 0;

  s.x = Math.min(maxX, Math.max(minX, s.x));
  s.y = Math.min(maxY, Math.max(minY, s.y));
}

function enablePanZoomOnImage(img) {

  img.addEventListener('wheel', e => {
    if (!img._state) return;
    e.preventDefault();
    let s = img._state;
    let oldScale = s.scale;
    let delta = -e.deltaY * 0.001;

    if (e.ctrlKey) delta *= 4;
    let newScale = Math.max(s.minScale, Math.min(s.maxScale, s.scale * (1 + delta)));
    if (newScale === s.scale) return;

    const rect = img.getBoundingClientRect();
    const cx = e.clientX - rect.left;
    const cy = e.clientY - rect.top;
    s.x = cx - (cx - s.x) * (newScale / oldScale);
    s.y = cy - (cy - s.y) * (newScale / oldScale);
    s.scale = newScale;
    constrain(img);
    updateTransform(img);

    const cell = img.closest('.collage-cell');
    if (cell) {
      const cellIndex = Array.from(cell.parentNode.children).indexOf(cell);
      if (collageCells[cellIndex]) {
        collageCells[cellIndex].scale = s.scale;
        collageCells[cellIndex].tx = s.x;
        collageCells[cellIndex].ty = s.y;
      }
    }
  });

  img.addEventListener('pointerdown', e => {
    if (!img._state) return;
    e.preventDefault();
    let s = img._state;
    s.isDragging = true;
    s.startX = e.clientX - s.x;
    s.startY = e.clientY - s.y;
    img.setPointerCapture(e.pointerId);
  });

  img.addEventListener('pointermove', e => {
    if (!img._state) return;
    let s = img._state;
    if (!s.isDragging) return;
    e.preventDefault();
    s.x = e.clientX - s.startX;
    s.y = e.clientY - s.startY;
    constrain(img);
    updateTransform(img);

    const cell = img.closest('.collage-cell');
    if (cell) {
      const cellIndex = Array.from(cell.parentNode.children).indexOf(cell);
      if (collageCells[cellIndex]) {
        collageCells[cellIndex].tx = s.x;
        collageCells[cellIndex].ty = s.y;
      }
    }
  });

  ['pointerup', 'pointerleave'].forEach(evt => {
    img.addEventListener(evt, e => {
      if (!img._state) return;
      let s = img._state;
      s.isDragging = false;
      img.releasePointerCapture(e.pointerId);
    });
  });
}

function setupImagePointerInteraction(img) {

  let ox = parseFloat(img.dataset.translateX) || 0;
  let oy = parseFloat(img.dataset.translateY) || 0;
  let scale = parseFloat(img.dataset.scale) || 1;
  let panStart = {
    x: 0,
    y: 0
  };
  let pinchStart = null;
  let scaleStart = 1,
    oxStart = 0,
    oyStart = 0;
  let pinchOrigin = {
    x: 0,
    y: 0
  };

  let lastTouchDist = 0;

  const updateM = () => {
    img.style.transform = `translate3d(${ox}px,${oy}px,0) scale(${scale})`;
    img.dataset.scale = scale;
    img.dataset.translateX = ox;
    img.dataset.translateY = oy;

    const cell = img.closest('.collage-cell');
    if (cell) {
      const cellIndex = Array.from(cell.parentNode.children).indexOf(cell);
      if (collageCells[cellIndex]) {
        collageCells[cellIndex].scale = scale;
        collageCells[cellIndex].tx = ox;
        collageCells[cellIndex].ty = oy;
      }
    }
  };

  img.addEventListener('touchstart', function(e) {
    if (e.touches.length === 1) {

      ox = parseFloat(img.dataset.translateX) || 0;
      oy = parseFloat(img.dataset.translateY) || 0;
      scale = parseFloat(img.dataset.scale) || 1;
      const touch = e.touches[0];
      panStart.x = touch.clientX - ox;
      panStart.y = touch.clientY - oy;
    } else if (e.touches.length === 2) {
      const t1 = e.touches[0],
        t2 = e.touches[1];
      pinchStart = [{
          x: t1.clientX,
          y: t1.clientY
        },
        {
          x: t2.clientX,
          y: t2.clientY
        }
      ];
      lastTouchDist = Math.hypot(t2.clientX - t1.clientX, t2.clientY - t1.clientY);
      scaleStart = scale;
      oxStart = ox;
      oyStart = oy;
      const cellRect = img.parentElement.getBoundingClientRect();
      pinchOrigin.x = ((t1.clientX + t2.clientX) / 2) - cellRect.left;
      pinchOrigin.y = ((t1.clientY + t2.clientY) / 2) - cellRect.top;
    }
  }, {
    passive: false
  });

  img.addEventListener('touchmove', function(e) {
    e.preventDefault();

    if (e.touches.length === 1 && pinchStart == null) {
      const touch = e.touches[0];
      ox = touch.clientX - panStart.x;
      oy = touch.clientY - panStart.y;
      updateM();
    } else if (e.touches.length === 2) {
      const t1 = e.touches[0],
        t2 = e.touches[1];
      let dist = Math.hypot(t2.clientX - t1.clientX, t2.clientY - t1.clientY);
      let newScale = Math.max(0.1, Math.min(20, scaleStart * (dist / lastTouchDist)));
      ox = pinchOrigin.x - (pinchOrigin.x - oxStart) * (newScale / scaleStart);
      oy = pinchOrigin.y - (pinchOrigin.y - oyStart) * (newScale / scaleStart);
      scale = newScale;
      updateM();
    }
  }, {
    passive: false
  });

  img.addEventListener('touchend', function(e) {

    if (e.touches.length < 2) pinchStart = null;
  });

  if (!('ontouchstart' in window)) {
    let isDragging = false;
    let dragStart = {
      x: 0,
      y: 0,
      ox: 0,
      oy: 0
    };

    img.addEventListener('pointerdown', e => {
      isDragging = true;
      dragStart.x = e.clientX;
      dragStart.y = e.clientY;
      dragStart.ox = parseFloat(img.dataset.translateX) || 0;
      dragStart.oy = parseFloat(img.dataset.translateY) || 0;
      img.setPointerCapture(e.pointerId);
    });

    img.addEventListener('pointermove', e => {
      if (!isDragging) return;
      ox = dragStart.ox + (e.clientX - dragStart.x);
      oy = dragStart.oy + (e.clientY - dragStart.y);
      updateM();
      e.preventDefault();
    });

    img.addEventListener('pointerup', e => {
      isDragging = false;
      img.releasePointerCapture(e.pointerId);
    });

    img.addEventListener('pointercancel', e => {
      isDragging = false;
    });
  }
}

const FORMATS = {
  "4:3": 4 / 3,
  "3:4": 3 / 4,
  "3:2": 3 / 2,
  "2:3": 2 / 3,
  "1:1": 1,
  "1:2": 1 / 2,
  "2:1": 2,
  "1:3": 1 / 3,
  "3:1": 3
};
const COLLAGE_TEMPLATES = {
  "3-1": {
    svg: `<svg viewBox="0 0 100 100"><title>1</title>
    <rect x="0" y="0" width="100" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="50" width="50" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "1",
    cells: [{
        x: 0,
        y: 0,
        width: 100,
        height: 50,
        resizable: {
          bottom: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 50,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 50,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "3-2": {
    svg: `<svg viewBox="0 0 100 100"><title>2</title>
    <rect x="0" y="0" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="50" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "2",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 100,
        resizable: {
          left: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 50,
        height: 50,
        resizable: {
          top: true,
          right: true
        }
      }
    ],
    resizable: true
  },
  "3-3": {
    svg: `<svg viewBox="0 0 100 100"><title>3</title>
    <rect x="0" y="0" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="100" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "3",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 100,
        height: 50,
        resizable: {
          top: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      }
    ],
    resizable: true
  },
  "4-4": {
    svg: `<svg viewBox="0 0 100 100"><title>4</title>
    <rect x="0" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "4",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          bottom: true,
          right: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 66.6,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 66.6,
        resizable: {
          top: true,
          right: true
        }
      },
      {
        x: 50,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-5": {
    svg: `<svg viewBox="0 0 100 100"><title>5</title>
    <rect x="0" y="0" width="66.6" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="66.6" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "5",
    cells: [{
        x: 0,
        y: 0,
        width: 66.6,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          top: true,
          right: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 66.6,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-6": {
    svg: `<svg viewBox="0 0 100 100"><title>6</title>
    <rect x="0" y="0" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="50" width="50" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "6",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 50,
        height: 50,
        resizable: {
          top: true,
          right: true
        }
      },
      {
        x: 50,
        y: 50,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-7": {
    svg: `<svg viewBox="0 0 100 100"><title>7</title>
    <rect x="0" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "7",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 100,
        resizable: {
          left: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-8": {
    svg: `<svg viewBox="0 0 100 100"><title>8</title>
    <rect x="0" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="100" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "8",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 100,
        height: 50,
        resizable: {
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-9": {
    svg: `<svg viewBox="0 0 100 100"><title>9</title>
    <rect x="0" y="0" width="50" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "9",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 100,
        resizable: {
          right: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          top: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-10": {
    svg: `<svg viewBox="0 0 100 100"><title>10</title>
    <rect x="0" y="0" width="100" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "10",
    cells: [{
        x: 0,
        y: 0,
        width: 100,
        height: 50,
        resizable: {
          bottom: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-11": {
    svg: `<svg viewBox="0 0 100 100"><title>11</title>
    <rect x="0" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "11",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          right: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          left: true
        }
      }
    ],
    resizable: true
  },

  "4-12": {
    svg: `<svg viewBox="0 0 100 100"><title>12</title>
    <rect x="0" y="0" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "12",
    cells: [{
        x: 0,
        y: 0,
        width: 100,
        height: 33.3,
        resizable: {
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 100,
        height: 33.3,
        resizable: {
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-13": {
    svg: `<svg viewBox="0 0 100 100"><title>13</title>
    <rect x="0" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="66.6" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "13",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          right: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 66.6,
        height: 50,
        resizable: {
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-14": {
    svg: `<svg viewBox="0 0 100 100"><title>14</title>
    <rect x="0" y="0" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "14",
    cells: [{
        x: 0,
        y: 0,
        width: 100,
        height: 33.3,
        resizable: {
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 66.6,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-15": {
    svg: `<svg viewBox="0 0 100 100"><title>15</title>
    <rect x="0" y="0" width="66.6" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "15",
    cells: [{
        x: 0,
        y: 0,
        width: 66.6,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          left: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-16": {
    svg: `<svg viewBox="0 0 100 100"><title>16</title>
    <rect x="0" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="66.6" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "16",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          right: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 66.6,
        height: 50,
        resizable: {
          left: true,
          bottom: true,
          right: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          top: true,
          right: true
        }
      },
      {
        x: 66.6,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "4-17": {
    svg: `<svg viewBox="0 0 100 100"><title>17</title>
    <rect x="0" y="0" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "17",
    cells: [{
        x: 0,
        y: 0,
        width: 100,
        height: 33.3,
        resizable: {
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 66.6,
        resizable: {
          left: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          top: true,
          right: true
        }
      }
    ],
    resizable: true
  },
  "5-18": {
    svg: `<svg viewBox="0 0 100 100"><title>18</title>
    <rect x="0" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "18",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          left: true,
          right: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          top: true,
          right: true
        }
      },
      {
        x: 66.6,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          top: true,
          left: true
        }
      }
    ],
    resizable: true
  },

  "5-19": {
    svg: `<svg viewBox="0 0 100 100"><title>19</title>
    <rect x="0" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "19",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 100,
        height: 33.3,
        resizable: {
          top: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          top: true,
          right: true
        }
      },
      {
        x: 50,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          top: true,
          left: true
        }
      }
    ],
    resizable: true
  },

  "5-20": {
    svg: `<svg viewBox="0 0 100 100"><title>20</title>
    <rect x="0" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "20",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          left: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          top: true,
          right: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "5-21": {
    svg: `<svg viewBox="0 0 100 100"><title>21</title>
    <rect x="0" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "21",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 100,
        height: 33.3,
        resizable: {
          top: true
        }
      }
    ],
    resizable: true
  },

  "5-22": {
    svg: `<svg viewBox="0 0 100 100"><title>22</title>
    <rect x="0" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "22",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          right: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "5-23": {
    svg: `<svg viewBox="0 0 100 100"><title>23</title>
    <rect x="0" y="0" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "23",
    cells: [{
        x: 0,
        y: 0,
        width: 100,
        height: 33.3,
        resizable: {
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "5-24": {
    svg: `<svg viewBox="0 0 100 100"><title>27</title>
    <rect x="0" y="0" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="66.6" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="25" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="75" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "27",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 25,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 66.6,
        height: 100,
        resizable: {
          left: true
        }
      },
      {
        x: 0,
        y: 25,
        width: 33.3,
        height: 25,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 33.3,
        height: 25,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 75,
        width: 33.3,
        height: 25,
        resizable: {
          right: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "5-25": {
    svg: `<svg viewBox="0 0 100 100"><title>25</title>
    <rect x="0" y="0" width="66.6" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="25" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="50" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="75" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "25",
    cells: [{
        x: 0,
        y: 0,
        width: 66.6,
        height: 100,
        resizable: {
          right: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 25,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 50,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 75,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "5-26": {
    svg: `<svg viewBox="0 0 100 100"><title>26</title>
    <rect x="0" y="0" width="100" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="66.6" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="66.6" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="66.6" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "26",
    cells: [{
        x: 0,
        y: 0,
        width: 100,
        height: 66.6,
        resizable: {
          bottom: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 25,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 25,
        y: 66.6,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 66.6,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 75,
        y: 66.6,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "5-28": {
    svg: `<svg viewBox="0 0 100 100"><title>28</title>
    <rect x="0" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "28",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          right: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          left: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          top: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          top: true,
          left: true
        }
      }
    ],
    resizable: true
  },

  "5-29": {
    svg: `<svg viewBox="0 0 100 100"><title>29</title>
    <rect x="0" y="0" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "29",
    cells: [{
        x: 0,
        y: 0,
        width: 100,
        height: 33.3,
        resizable: {
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 100,
        height: 33.3,
        resizable: {
          top: true
        }
      }
    ],
    resizable: true
  },

  "5-30": {
    svg: `<svg viewBox="0 0 100 100"><title>30</title>
    <rect x="0" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="50" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "30",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          top: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 50,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          top: true,
          right: true
        }
      }
    ],
    resizable: true
  },

  "5-31": {
    svg: `<svg viewBox="0 0 100 100"><title>31</title>
    <rect x="0" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="50" width="50" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "31",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 50,
        height: 50,
        resizable: {
          top: true,
          right: true
        }
      },
      {
        x: 50,
        y: 50,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "5-32": {
    svg: `<svg viewBox="0 0 100 100"><title>32</title>
    <rect x="0" y="0" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "32",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 50,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "5-33": {
    svg: `<svg viewBox="0 0 100 100"><title>33</title>
    <rect x="0" y="0" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "33",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "6-34": {
    svg: `<svg viewBox="0 0 100 100"><title>34</title>
    <rect x="0" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "34",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          top: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          top: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-35": {
    svg: `<svg viewBox="0 0 100 100"><title>35</title>
    <rect x="0" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "35",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-36": {
    svg: `<svg viewBox="0 0 100 100"><title>36</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="66.6" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "36",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 66.6,
        height: 66.6,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-37": {
    svg: `<svg viewBox="0 0 100 100"><title>37</title>
    <rect x="0" y="0" width="66.6" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "37",
    cells: [{
        x: 0,
        y: 0,
        width: 66.6,
        height: 66.6,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-38": {
    svg: `<svg viewBox="0 0 100 100"><title>38</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="66.6" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "38",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 66.6,
        height: 66.6,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-39": {
    svg: `<svg viewBox="0 0 100 100"><title>39</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="66.6" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "39",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 66.6,
        height: 66.6,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-40": {
    svg: `<svg viewBox="0 0 100 100"><title>40</title>
    <rect x="0" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "40",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 66.6,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 66.6,
        height: 33.3,
        resizable: {
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-41": {
    svg: `<svg viewBox="0 0 100 100"><title>41</title>
    <rect x="0" y="0" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "41",
    cells: [{
        x: 0,
        y: 0,
        width: 66.6,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 66.6,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-42": {
    svg: `<svg viewBox="0 0 100 100"><title>42</title>
    <rect x="0" y="0" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="66.6" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "42",
    cells: [{
        x: 0,
        y: 0,
        width: 66.6,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 66.6,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 66.6,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-43": {
    svg: `<svg viewBox="0 0 100 100"><title>43</title>
    <rect x="0" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "43",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 66.6,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 66.6,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "6-44": {
    svg: `<svg viewBox="0 0 100 100"><title>44</title>
    <rect x="0" y="0" width="50" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="0" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="66.6" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "44",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 66.6,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 75,
        y: 0,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 66.6,
        resizable: {
          top: true,
          left: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 25,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 25,
        y: 66.6,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-45": {
    svg: `<svg viewBox="0 0 100 100"><title>45</title>
    <rect x="0" y="0" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="66.6" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="25" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="66.6" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="50" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="75" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "45",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 25,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 66.6,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 25,
        width: 33.3,
        height: 25,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 66.6,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 50,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 75,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-46": {
    svg: `<svg viewBox="0 0 100 100"><title>46</title>
    <rect x="0" y="0" width="66.6" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="25" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="66.6" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="75" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "46",
    cells: [{
        x: 0,
        y: 0,
        width: 66.6,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 25,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 33.3,
        height: 25,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 66.6,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 0,
        y: 75,
        width: 33.3,
        height: 25,
        resizable: {
          right: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-47": {
    svg: `<svg viewBox="0 0 100 100"><title>47</title>
    <rect x="0" y="0" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="0" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="66.6" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="66.6" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "47",
    cells: [{
        x: 0,
        y: 0,
        width: 25,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 25,
        y: 0,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 66.6,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 66.6,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 66.6,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 75,
        y: 66.6,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-48": {
    svg: `<svg viewBox="0 0 100 100"><title>48</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "48",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 66.6,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 66.6,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-49": {
    svg: `<svg viewBox="0 0 100 100"><title>49</title>
    <rect x="0" y="0" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "49",
    cells: [{
        x: 0,
        y: 0,
        width: 66.6,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 66.6,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-50": {
    svg: `<svg viewBox="0 0 100 100"><title>50</title>
    <rect x="0" y="0" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "50",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 66.6,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 66.6,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "6-51": {
    svg: `<svg viewBox="0 0 100 100"><title>51</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "51",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 66.6,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 66.6,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "7-52": {
    svg: `<svg viewBox="0 0 100 100"><title>52</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "52",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 66.6,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 66.6,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "7-53": {
    svg: `<svg viewBox="0 0 100 100"><title>53</title>
    <rect x="0" y="0" width="33.6" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "53",
    cells: [{
        x: 0,
        y: 0,
        width: 33.6,
        height: 66.6,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 66.6,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "7-54": {
    svg: `<svg viewBox="0 0 100 100"><title>54</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "54",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 66.6,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 66.6,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "7-55": {
    svg: `<svg viewBox="0 0 100 100"><title>55</title>
    <rect x="0" y="0" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.3" y="33.3" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "55",
    cells: [{
        x: 0,
        y: 0,
        width: 66.6,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.3,
        y: 33.3,
        width: 33.3,
        height: 66.6,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "7-57": {
    svg: `<svg viewBox="0 0 100 100"><title>57</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "57",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 66.6,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 66.6,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "7-58": {
    svg: `<svg viewBox="0 0 100 100"><title>58</title>
    <rect x="0" y="0" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="0" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "58",
cells: [
  {
    x: 0,
    y: 0,
    width: 33.3,
    height: 66.6,
    resizable: { right: true, bottom: true }
  },
  {
    x: 33.3,
    y: 0,
    width: 33.3,
    height: 33.3,
    resizable: { left: true, right: true, bottom: true }
  },
  {
    x: 66.6,
    y: 0,
    width: 33.3,
    height: 33.3,
    resizable: { left: true, bottom: true }
  },
  {
    x: 33.3,
    y: 33.3,
    width: 33.3,
    height: 33.3,
    resizable: { left: true, right: true, bottom: true, top: true }
  },
  {
    x: 66.6,
    y: 33.3,
    width: 33.3,
    height: 66.6,
    resizable: { left: true, top: true }
  },
  {
    x: 0,
    y: 66.6,
    width: 33.3,
    height: 33.3,
    resizable: { right: true, top: true }
  },
  {
    x: 33.3,
    y: 66.6,
    width: 33.3,
    height: 33.3,
    resizable: { left: true, right: true, top: true }
  }
],
resizable: true
  },

  "7-59": {
    svg: `<svg viewBox="0 0 100 100"><title>59</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "59",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 66.6,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 66.6,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "7-60": {
    svg: `<svg viewBox="0 0 100 100"><title>60</title>
    <rect x="0" y="0" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "60",
    cells: [{
        x: 0,
        y: 0,
        width: 66.6,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 66.6,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "7-61": {
    svg: `<svg viewBox="0 0 100 100"><title>61</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "61",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 100,
        height: 33.3,
        resizable: {
          top: true
        }
      }
    ],
    resizable: true
  },

  "7-62": {
    svg: `<svg viewBox="0 0 100 100"><title>62</title>
    <rect x="0" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "62",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          right: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "7-63": {
    svg: `<svg viewBox="0 0 100 100"><title>63</title>
    <rect x="0" y="0" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "63",
    cells: [{
        x: 0,
        y: 0,
        width: 100,
        height: 33.3,
        resizable: {
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "7-64": {
    svg: `<svg viewBox="0 0 100 100"><title>64</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "64",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          left: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "7-65": {
    svg: `<svg viewBox="0 0 100 100"><title>65</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="100" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "65",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 100,
        height: 33.3,
        resizable: {
          top: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "7-66": {
    svg: `<svg viewBox="0 0 100 100"><title>66</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="100" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "66",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 100,
        resizable: {
          left: true,
          right: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "8-67": {
    svg: `<svg viewBox="0 0 100 100"><title>67</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "67",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 66.6,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "8-68": {
    svg: `<svg viewBox="0 0 100 100"><title>68</title>
    <rect x="0" y="0" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="0" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "68",
   cells: [
  { x: 0, y: 66.7, width: 33.3, height: 33.3, resizable: { right: true, bottom: true } },
  { x: 0, y: 0,    width: 33.3, height: 66.6, resizable: { right: true, bottom: true } },
  { x: 33.3, y: 66.7, width: 33.3, height: 33.3, resizable: { left: true, right: true, bottom: true } },
  { x: 33.3, y: 33.4, width: 33.3, height: 33.3, resizable: { left: true, right: true, bottom: true, top: true } },
  { x: 33.3, y: 0, width: 33.3, height: 33.3, resizable: { left: true, right: true, top: true, bottom: true } },
  { x: 66.6, y: 66.7, width: 33.3, height: 33.3, resizable: { left: true, bottom: true } },
  { x: 66.6, y: 33.4, width: 33.3, height: 33.3, resizable: { left: true, bottom: true, top: true } },
  { x: 66.6, y: 0, width: 33.3, height: 33.3, resizable: { left: true, top: true } }
],
resizable: true
  },

  "8-69": {
    svg: `<svg viewBox="0 0 100 100"><title>69</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="66.6" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "69",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 66.6,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "8-70": {
    svg: `<svg viewBox="0 0 100 100"><title>70</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="66.6" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "70",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 66.6,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "8-73": {
    svg: `<svg viewBox="0 0 100 100"><title>73</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="50" width="33.3" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "73",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 50,
        width: 33.3,
        height: 50,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "8-74": {
    svg: `<svg viewBox="0 0 100 100"><title>74</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="33.3" width="50" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "74",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 33.3,
        width: 50,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "8-75": {
    svg: `<svg viewBox="0 0 100 100"><title>75</title>
    <rect x="0" y="0" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="0" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="0" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="25" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="25" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="25" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="75" width="100" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "75",
    cells: [{
        x: 0,
        y: 0,
        width: 25,
        height: 25,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 25,
        y: 0,
        width: 25,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 25,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 75,
        y: 0,
        width: 25,
        height: 25,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 25,
        width: 25,
        height: 50,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 25,
        y: 25,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 75,
        y: 25,
        width: 25,
        height: 50,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 75,
        width: 100,
        height: 25,
        resizable: {
          top: true
        }
      }
    ],
    resizable: true
  },

  "8-76": {
    svg: `<svg viewBox="0 0 100 100"><title>76</title>
    <rect x="0" y="0" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="0" width="50" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="0" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="25" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="33.3" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="66.6" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="75" width="50" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "76",
    cells: [{
        x: 0,
        y: 0,
        width: 25,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 25,
        y: 0,
        width: 50,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 75,
        y: 0,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 25,
        y: 25,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 75,
        y: 33.3,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 25,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 75,
        y: 66.6,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 25,
        y: 75,
        width: 50,
        height: 25,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "8-77": {
    svg: `<svg viewBox="0 0 100 100"><title>77</title>
    <rect x="0" y="0" width="50" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="25" width="50" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="25" width="50" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="50" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="50" width="50" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="75" width="50" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="75" width="50" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "77",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 25,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 25,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 25,
        width: 50,
        height: 25,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 25,
        width: 50,
        height: 25,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 50,
        height: 25,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 50,
        width: 50,
        height: 25,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 75,
        width: 50,
        height: 25,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 75,
        width: 50,
        height: 25,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "8-78": {
    svg: `<svg viewBox="0 0 100 100"><title>78</title>
    <rect x="0" y="0" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="0" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="0" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="50" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="50" width="27" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="50" width="25" height="50" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "78",
    cells: [{
        x: 0,
        y: 0,
        width: 25,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 25,
        y: 0,
        width: 25,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 25,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 75,
        y: 0,
        width: 25,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 25,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 25,
        y: 50,
        width: 25,
        height: 50,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 50,
        width: 27,
        height: 50,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 75,
        y: 50,
        width: 25,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "9-71": {
    svg: `<svg viewBox="0 0 100 100"><title>71</title>
    <rect x="0" y="0" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="25" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="25" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="25" width="25" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="75" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="75" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="75" width="33.3" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "71",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 25,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 25,
        width: 25,
        height: 50,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 25,
        y: 25,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 75,
        y: 25,
        width: 25,
        height: 50,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 75,
        width: 33.3,
        height: 25,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 75,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 75,
        width: 33.3,
        height: 25,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "9-72": {
    svg: `<svg viewBox="0 0 100 100"><title>72</title>
    <rect x="0" y="0" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="0" width="50" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="0" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="25" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="33.3" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="66.6" width="25" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="75" width="50" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "72",
    cells: [{
        x: 0,
        y: 0,
        width: 25,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 25,
        y: 0,
        width: 50,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 75,
        y: 0,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 25,
        y: 25,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 25,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 75,
        y: 33.3,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 25,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 75,
        y: 66.6,
        width: 25,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 25,
        y: 75,
        width: 50,
        height: 25,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "9-56": {
    svg: `<svg viewBox="0 0 100 100"><title>56</title>
    <rect x="0" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="0" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="33.3" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="33.3" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
    <rect x="66.6" y="66.6" width="33.3" height="33.3" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "56",
    cells: [{
        x: 0,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 33.3,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 66.6,
        y: 0,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 33.3,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 33.3,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 66.6,
        y: 66.6,
        width: 33.3,
        height: 33.3,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "12-79": {
    svg: `<svg viewBox="0 0 100 100"><title>79</title>
    <rect x="0" y="0" width="50" height="40" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="0" width="25" height="40" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="20" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="40" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="40" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="40" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="40" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="60" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="60" width="50" height="40" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="60" width="25" height="40" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="80" width="25" height="20" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "79",
    cells: [{
        x: 0,
        y: 0,
        width: 50,
        height: 40,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 75,
        y: 0,
        width: 25,
        height: 40,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 20,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 40,
        width: 25,
        height: 20,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 25,
        y: 40,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 40,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 75,
        y: 40,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 25,
        y: 60,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 60,
        width: 50,
        height: 40,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 0,
        y: 60,
        width: 25,
        height: 40,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 25,
        y: 80,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "12-80": {
    svg: `<svg viewBox="0 0 100 100"><title>80</title>
    <rect x="0" y="0" width="40" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="40" y="0" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="60" y="0" width="40" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="20" y="25" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="40" y="25" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0"  y="25" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0"  y="50" width="40" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="40" y="50" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="60" y="50" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="40" y="75" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="60" y="75" width="40" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="80" y="50" width="20" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "80",
    cells: [{
        x: 0,
        y: 0,
        width: 40,
        height: 25,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 40,
        y: 0,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 60,
        y: 0,
        width: 40,
        height: 50,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 20,
        y: 25,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 40,
        y: 25,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 25,
        width: 20,
        height: 25,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 40,
        height: 50,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 40,
        y: 50,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 60,
        y: 50,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 40,
        y: 75,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 60,
        y: 75,
        width: 40,
        height: 25,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 80,
        y: 50,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "12-81": {
    svg: `<svg viewBox="0 0 100 100"><title>81</title>
    <rect x="0" y="0" width="40" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="40" y="0" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="60" y="0" width="40" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="40" y="25" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="60" y="25" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="80" y="25" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0"  y="50" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="20" y="50" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="40" y="50" width="20" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="60" y="50" width="40" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="0"  y="75" width="40" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="40" y="75" width="20" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "81",
    cells: [{
        x: 0,
        y: 0,
        width: 40,
        height: 50,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 40,
        y: 0,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 60,
        y: 0,
        width: 40,
        height: 25,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 40,
        y: 25,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 60,
        y: 25,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 80,
        y: 25,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 20,
        height: 25,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 20,
        y: 50,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 40,
        y: 50,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 60,
        y: 50,
        width: 40,
        height: 50,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 0,
        y: 75,
        width: 40,
        height: 25,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 40,
        y: 75,
        width: 20,
        height: 25,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      }
    ],
    resizable: true
  },

  "12-82": {
    svg: `<svg viewBox="0 0 100 100"><title>82</title>
    <rect x="0" y="0" width="25" height="40" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="0" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="20" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="50" height="40" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="40" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="40" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="40" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="40" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="60" width="50" height="40" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="60" width="25" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="60" width="25" height="40" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="80" width="25" height="20" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "82",
    cells: [{
        x: 0,
        y: 0,
        width: 25,
        height: 40,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 25,
        y: 0,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 25,
        y: 20,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 50,
        height: 40,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 40,
        width: 25,
        height: 20,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 25,
        y: 40,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 50,
        y: 40,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 75,
        y: 40,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 60,
        width: 50,
        height: 40,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 60,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 75,
        y: 60,
        width: 25,
        height: 40,
        resizable: {
          left: true,
          top: true
        }
      },
      {
        x: 50,
        y: 80,
        width: 25,
        height: 20,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "13-83": {
    svg: `<svg viewBox="0 0 100 100"><title>83</title>
    <rect x="0" y="0" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="0" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="0" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="0" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="25" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="25" width="50" height="50" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="25" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="50" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="50" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="75" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="25" y="75" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="50" y="75" width="25" height="25" fill="#fff" stroke="#aaa"/>
    <rect x="75" y="75" width="25" height="25" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "83",
    cells: [{
        x: 0,
        y: 0,
        width: 25,
        height: 25,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 25,
        y: 0,
        width: 25,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 50,
        y: 0,
        width: 25,
        height: 25,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 75,
        y: 0,
        width: 25,
        height: 25,
        resizable: {
          left: true,
          bottom: true
        }
      },
      {
        x: 0,
        y: 25,
        width: 25,
        height: 25,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 25,
        y: 25,
        width: 50,
        height: 50,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 75,
        y: 25,
        width: 25,
        height: 25,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 50,
        width: 25,
        height: 25,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 75,
        y: 50,
        width: 25,
        height: 25,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 0,
        y: 75,
        width: 25,
        height: 25,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 25,
        y: 75,
        width: 25,
        height: 25,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 50,
        y: 75,
        width: 25,
        height: 25,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 75,
        y: 75,
        width: 25,
        height: 25,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  },
  "17-84": {
    svg: `<svg viewBox="0 0 100 100"><title>84</title>
    <rect x="0" y="0" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="20" y="0" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="40" y="0" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="60" y="0" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="80" y="0" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="20" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="20" y="20" width="60" height="60" fill="#fff" stroke="#aaa"/>
    <rect x="80" y="20" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="40" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="80" y="40" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="60" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="80" y="60" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="0" y="80" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="20" y="80" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="40" y="80" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="60" y="80" width="20" height="20" fill="#fff" stroke="#aaa"/>
    <rect x="80" y="80" width="20" height="20" fill="#fff" stroke="#aaa"/>
  </svg>`,
    title: "84",
    cells: [{
        x: 0,
        y: 0,
        width: 20,
        height: 20,
        resizable: {
          right: true,
          bottom: true
        }
      },
      {
        x: 20,
        y: 0,
        width: 20,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 40,
        y: 0,
        width: 20,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 60,
        y: 0,
        width: 20,
        height: 20,
        resizable: {
          left: true,
          right: true,
          bottom: true
        }
      },
      {
        x: 80,
        y: 0,
        width: 20,
        height: 20,
        resizable: {
          left: true,
          bottom: true
        }
      },

      {
        x: 0,
        y: 20,
        width: 20,
        height: 20,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 20,
        y: 20,
        width: 60,
        height: 60,
        resizable: {
          left: true,
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 80,
        y: 20,
        width: 20,
        height: 20,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },

      {
        x: 0,
        y: 40,
        width: 20,
        height: 20,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 80,
        y: 40,
        width: 20,
        height: 20,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },

      {
        x: 0,
        y: 60,
        width: 20,
        height: 20,
        resizable: {
          right: true,
          bottom: true,
          top: true
        }
      },
      {
        x: 80,
        y: 60,
        width: 20,
        height: 20,
        resizable: {
          left: true,
          bottom: true,
          top: true
        }
      },

      {
        x: 0,
        y: 80,
        width: 20,
        height: 20,
        resizable: {
          right: true,
          top: true
        }
      },
      {
        x: 20,
        y: 80,
        width: 20,
        height: 20,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 40,
        y: 80,
        width: 20,
        height: 20,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 60,
        y: 80,
        width: 20,
        height: 20,
        resizable: {
          left: true,
          right: true,
          top: true
        }
      },
      {
        x: 80,
        y: 80,
        width: 20,
        height: 20,
        resizable: {
          left: true,
          top: true
        }
      }
    ],
    resizable: true
  }

};

let currentCount = 3,
  currentFormat = "4:3",
  selectedGrid = null;
let uploadedImages = [],
  isDragging = false;
window.activeCell = null;

let draggedImage, draggedImageIndex, isDraggingFromCollage, originalCell;
let collageStyle = {
    gap: 5,
    bgColor: '#e6e6e6'
  },
  gridColPercents = [50, 50],
  gridRowPercents = [50, 50];
const thumbnailsContainer = document.getElementById("thumbnails"),
  collagePreview = document.getElementById("collage-preview");

document.addEventListener('dragstart', e => e.preventDefault());
document.addEventListener('dragover', e => e.preventDefault());
document.addEventListener('drop', e => e.preventDefault());

function updateCollageStyle() {
  collagePreview.style.gap = `${collageStyle.gap}px`;
  collagePreview.style.background = collageStyle.bgColor;
}

function updateAllCellImages() {
  document.querySelectorAll('.collage-cell-img').forEach(img => {
    applyCoverToImage(img);
  });
}

function initCellEvents() {

}

function initGridTemplates() {
  const c = document.getElementById('grid-templates');
  c.innerHTML = '';
  const available = [];

  const shownSVG = new Set();

  for (const k in COLLAGE_TEMPLATES) {
    const tmpl = COLLAGE_TEMPLATES[k];
    if (!tmpl.cells || tmpl.cells.length !== currentCount) continue;

    if (shownSVG.has(tmpl.svg)) continue;
    shownSVG.add(tmpl.svg);

    const d = document.createElement('div');
    d.className = 'grid-template';
    d.innerHTML = tmpl.svg;
    d.dataset.template = k;
    d.addEventListener('click', () => {
      document.querySelectorAll('.grid-template').forEach(x => x.classList.remove('selected'));
      d.classList.add('selected');
      selectedGrid = k;
      renderCollage();
    });
    c.appendChild(d);
    available.push(k);
  }

  if (!available.includes(selectedGrid)) {
    selectedGrid = available[0] || null;
  }

  c.querySelectorAll('.grid-template').forEach(el => {
    if (el.dataset.template === selectedGrid) el.classList.add('selected');
  });
  renderCollage();
}

function renderCollage() {
  const g = COLLAGE_TEMPLATES[selectedGrid];
  if (!g) return;
  if (!window.collageCells) window.collageCells = [];
  while (collageCells.length < g.cells.length)
    collageCells.push({
      imageId: null,
      scale: 1,
      tx: 0,
      ty: 0
    });
  while (collageCells.length > g.cells.length) collageCells.pop();

  collagePreview.innerHTML = '';
  collagePreview.style.position = 'relative';
  collagePreview.style.display = 'grid';
  collagePreview.style.gridTemplateColumns = '';
  collagePreview.style.gridTemplateRows = '';

  g.cells.forEach((cell, i) => {
    const d = document.createElement('div');
    d.className = 'collage-cell';
    d.style.position = 'absolute';

        const spacing = (typeof collageStyle === 'object' && 'gap' in collageStyle) ? collageStyle.gap : 5;
    const half = spacing / 2;
  if (spacing === 0) {
  d.style.left = `${cell.x}%`;
  d.style.top = `${cell.y}%`;
  d.style.width = `${cell.width}%`;
  d.style.height = `${cell.height}%`;
} else {
  d.style.left   = `calc(${cell.x}% + ${spacing / 2}px)`;
  d.style.top    = `calc(${cell.y}% + ${spacing / 2}px)`;
  d.style.width  = `calc(${cell.width}% - ${spacing}px)`;
  d.style.height = `calc(${cell.height}% - ${spacing}px)`;
}



    d.style.boxSizing = 'border-box';

    const cellData = collageCells[i];
    if (cellData && cellData.imageId) {
      const imgObj = uploadedImages.find(x => x.id === cellData.imageId);
      if (imgObj) {
        createCollageCellImage(d, imgObj.src, imgObj.id, cellData.scale, cellData.tx, cellData.ty);
      } else {
        d.innerHTML = `<span class="placeholder">${i+1}. Перетащите сюда фото</span>`;
      }
    } else {
      d.innerHTML = `<span class="placeholder">${i+1}. Перетащите сюда фото</span>`;
    }
    collagePreview.appendChild(d);
  });

  renderResizeHandles();

  blockIOSRubberBand();
}

function renderResizeHandles() {
  if (window.innerWidth <= 700) return;

  document.querySelectorAll('.grid-resize-handle').forEach(h => h.remove());

  const g = COLLAGE_TEMPLATES[selectedGrid];
  if (!g) return;

  g.cells.forEach((cell, i) => {
    if (!cell.resizable || !cell.resizable.right) return;

    const xRight = +(cell.x + cell.width).toFixed(4);
    const yTop = +cell.y.toFixed(4);
    const yBot = +(cell.y + cell.height).toFixed(4);

    const j = g.cells.findIndex((c2, idx) =>
      idx !== i &&
      Math.abs(c2.x - xRight) < 0.01 &&
      Math.abs(c2.y - yTop) < 0.01 &&
      Math.abs((c2.y + c2.height) - yBot) < 0.01
    );

    if (j < 0) return;

    const handle = document.createElement('div');
    handle.className = 'grid-resize-handle vertical';
    handle.style.width = '32px';
    handle.style.height = '32px';
    handle.style.left = `calc(${xRight}% - 16px)`;
    handle.style.top = `calc(${cell.y + cell.height / 2}% - 16px)`;
    handle.style.position = 'absolute';
    handle.style.zIndex = 10;
    handle.innerHTML = `
  <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 800.000000 800.000000" preserveAspectRatio="xMidYMid meet">
<g transform="translate(0.000000,800.000000) scale(0.100000,-0.100000)" fill="#4a90e2" stroke="none">
<path d="M1910 5321 c-87 -28 -127 -64 -656 -594 -517 -518 -543 -545 -564
-602 -29 -80 -29 -170 0 -250 21 -57 47 -84 564 -602 621 -621 592 -598 746
-598 84 0 101 3 147 28 66 34 116 84 150 150 25 46 28 63 28 147 0 142 -10
158 -288 437 l-230 232 644 3 644 3 52 27 c66 35 116 85 150 151 25 46 28 63
28 147 0 84 -3 101 -28 147 -34 66 -84 116 -150 151 l-52 27 -644 3 -644 3
230 232 c278 279 288 295 288 437 0 84 -3 101 -28 147 -60 115 -154 175 -282
179 -44 2 -91 0 -105 -5z"></path>
<path d="M5910 5321 c-92 -30 -163 -90 -207 -174 -25 -46 -28 -63 -28 -147 0
-142 10 -158 288 -437 l230 -232 -644 -3 -644 -3 -52 -27 c-66 -35 -116 -85
-150 -151 -25 -46 -28 -63 -28 -147 0 -84 3 -101 28 -147 34 -66 84 -116 150
-151 l52 -27 644 -3 644 -3 -230 -232 c-278 -279 -288 -295 -288 -437 0 -84 3
-101 28 -147 34 -66 84 -116 150 -150 46 -25 63 -28 147 -28 154 0 125 -23
746 598 517 518 543 545 564 602 14 39 22 83 22 125 0 42 -8 86 -22 125 -21
57 -47 84 -564 602 -608 608 -591 594 -731 599 -44 2 -91 0 -105 -5z"></path>
</g>
</svg>
`;

    let startX, startWidth1, startWidth2;
    handle.onpointerdown = function(e) {
      e.preventDefault();
      startX = e.clientX;
      startWidth1 = cell.width;
      startWidth2 = g.cells[j].width;
      document.body.style.cursor = 'ew-resize';
      handle.classList.add('active');

      function onMove(ev) {
        let dx = (ev.clientX - startX) / collagePreview.offsetWidth * 100;
        let newW1 = Math.max(5, startWidth1 + dx);
        let newW2 = Math.max(5, startWidth2 - dx);
        if (newW1 + newW2 > startWidth1 + startWidth2 + 0.01) return;

        cell.width = newW1;
        g.cells[j].width = newW2;
        g.cells[j].x = +(cell.x + newW1).toFixed(4);

        renderCollage();
      }

      function onUp() {
        document.body.style.cursor = '';
        handle.classList.remove('active');
        window.removeEventListener('pointermove', onMove);
        window.removeEventListener('pointerup', onUp);
      }
      window.addEventListener('pointermove', onMove);
      window.addEventListener('pointerup', onUp);
    };

    collagePreview.appendChild(handle);
  });

  g.cells.forEach((cell, i) => {
    if (!cell.resizable || !cell.resizable.bottom) return;

    const yBottom = +(cell.y + cell.height).toFixed(4);
    const xLeft = +cell.x.toFixed(4);
    const xRight = +(cell.x + cell.width).toFixed(4);

    const j = g.cells.findIndex((c2, idx) =>
      idx !== i &&
      Math.abs(c2.y - yBottom) < 0.01 &&
      Math.abs(c2.x - xLeft) < 0.01 &&
      Math.abs((c2.x + c2.width) - xRight) < 0.01
    );

    if (j < 0) return;

    const handle = document.createElement('div');
    handle.className = 'grid-resize-handle horizontal';
    handle.style.left = `calc(${cell.x + cell.width / 2}% - 16px)`;
    handle.style.top = `calc(${yBottom}% - 16px)`;
    handle.style.position = 'absolute';
    handle.style.zIndex = 10;
    handle.innerHTML = `
  <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 800 800" fill="#4a90e2" style="transform: rotate(90deg); display: block; margin: auto;">
    <g transform="translate(0,800) scale(0.1,-0.1)" fill="#4a90e2" stroke="none">
      <path d="M1910 5321 c-87 -28 -127 -64 -656 -594 -517 -518 -543 -545 -564
-602 -29 -80 -29 -170 0 -250 21 -57 47 -84 564 -602 621 -621 592 -598 746
-598 84 0 101 3 147 28 66 34 116 84 150 150 25 46 28 63 28 147 0 142 -10
158 -288 437 l-230 232 644 3 644 3 52 27 c66 35 116 85 150 151 25 46 28 63
28 147 0 84 -3 101 -28 147 -34 66 -84 116 -150 151 l-52 27 -644 3 -644 3
230 232 c278 279 288 295 288 437 0 84 -3 101 -28 147 -60 115 -154 175 -282
179 -44 2 -91 0 -105 -5z"></path>
      <path d="M5910 5321 c-92 -30 -163 -90 -207 -174 -25 -46 -28 -63 -28 -147 0
-142 10 -158 288 -437 l230 -232 -644 -3 -644 -3 -52 -27 c-66 -35 -116 -85
-150 -151 -25 -46 -28 -63 -28 -147 0 -84 3 -101 28 -147 34 -66 84 -116 150
-151 l52 -27 644 -3 644 -3 -230 -232 c-278 -279 -288 -295 -288 -437 0 -84 3
-101 28 -147 34 -66 84 -116 150 -150 46 -25 63 -28 147 -28 154 0 125 -23
746 598 517 518 543 545 564 602 14 39 22 83 22 125 0 42 -8 86 -22 125 -21
57 -47 84 -564 602 -608 608 -591 594 -731 599 -44 2 -91 0 -105 -5z"></path>
    </g>
  </svg>
`;

    let startY, startHeight1, startHeight2;
    handle.onpointerdown = function(e) {
      e.preventDefault();
      startY = e.clientY;
      startHeight1 = cell.height;
      startHeight2 = g.cells[j].height;
      document.body.style.cursor = 'ns-resize';
      handle.classList.add('active');

      function onMove(ev) {
        let dy = (ev.clientY - startY) / collagePreview.offsetHeight * 100;
        let newH1 = Math.max(5, startHeight1 + dy);
        let newH2 = Math.max(5, startHeight2 - dy);
        if (newH1 + newH2 > startHeight1 + startHeight2 + 0.01) return;

        cell.height = newH1;
        g.cells[j].height = newH2;
        g.cells[j].y = +(cell.y + newH1).toFixed(4);
        renderCollage();
      }

      function onUp() {
        document.body.style.cursor = '';
        handle.classList.remove('active');
        window.removeEventListener('pointermove', onMove);
        window.removeEventListener('pointerup', onUp);
      }

      window.addEventListener('pointermove', onMove);
      window.addEventListener('pointerup', onUp);
    };

    collagePreview.appendChild(handle);
  });
}

function resetGridPercents() {

}

function updateCollagePreviewSize() {
  const gap = collageStyle.gap || 5;
  const ratio = FORMATS[currentFormat] || 4 / 3;

  const el = document.getElementById('collage-preview');

  if (window.innerWidth < 600) {
    // мобильная версия: строго по центру, без смещений
    el.style.width = '98vw';
    el.style.height = `calc(98vw / ${ratio})`;
    el.style.margin = '0 auto';
    el.style.left = 'auto';
    el.style.transform = 'none';
  } else {
    // ПК-версия: максимально возможный размер без перекрытия табов
    const controlPanel = document.querySelector('.control-panel');
    const panelHeight = controlPanel ? controlPanel.offsetHeight : 220;
    const viewportHeight = window.innerHeight;

    // доступная высота над табами
    const availableHeight = viewportHeight - panelHeight - 40; // 40px запас
    const maxH = Math.min(availableHeight * 0.95, viewportHeight * 0.95);
    const maxW = window.innerWidth * 0.78;

    let w, h;
    if (maxW / maxH > ratio) {
      h = maxH;
      w = h * ratio;
    } else {
      w = maxW;
      h = w / ratio;
    }

    el.style.width = `${w - gap * 2}px`;
    el.style.height = `${h - gap * 2}px`;
    el.style.maxWidth = 'none';
    el.style.maxHeight = 'none';
    el.style.margin = 'auto';
  }
}

function createCollageCellImage(cell, src, index, scale = 1, tx = 0, ty = 0) {
  cell.innerHTML = '';
  const img = document.createElement('img');
  img.className = 'collage-cell-img';
  img.src = src;
  img.dataset.index = index;
  img.dataset.scale = String(scale);
  img.dataset.translateX = String(tx);
  img.dataset.translateY = String(ty);
  img.draggable = false;
  cell.appendChild(img);

  const removeBtn = document.createElement('button');
  removeBtn.className = 'cell-remove';
  removeBtn.innerHTML = '✕';
  removeBtn.title = 'Удалить фото';
  removeBtn.addEventListener('click', function(e) {
    e.stopPropagation();

    cell.innerHTML = `<span class="placeholder">${
      Array.from(cell.parentNode.children).indexOf(cell) + 1
    }. Перетащите сюда фото</span>`;
    const cellIndex = Array.from(cell.parentNode.children).indexOf(cell);
    if (collageCells[cellIndex]) {
      collageCells[cellIndex].imageId = null;
      collageCells[cellIndex].scale = 1;
      collageCells[cellIndex].tx = 0;
      collageCells[cellIndex].ty = 0;
    }
  });
  cell.appendChild(removeBtn);
  let lastTapTime = 0;
  img.addEventListener('touchend', function(e) {

    if (e.touches && e.touches.length > 0) return;
    if (handMode) return;
    const now = Date.now();
    if (now - lastTapTime < 400) {

      cell.innerHTML = `<span class="placeholder">${
        Array.from(cell.parentNode.children).indexOf(cell) + 1
      }. Перетащите сюда фото</span>`;
      const cellIndex = Array.from(cell.parentNode.children).indexOf(cell);
      if (collageCells[cellIndex]) {
        collageCells[cellIndex].imageId = null;
        collageCells[cellIndex].scale = 1;
        collageCells[cellIndex].tx = 0;
        collageCells[cellIndex].ty = 0;
      }
      lastTapTime = 0;
    } else {
      lastTapTime = now;
    }
  });

  img.onload = () => {
    applyCoverToImage(img);

    if (scale !== 1 || tx !== 0 || ty !== 0) {
      img._state.scale = scale;
      img._state.x = tx;
      img._state.y = ty;
      img.dataset.scale = scale;
      img.dataset.translateX = tx;
      img.dataset.translateY = ty;
      img.style.transform = `translate3d(${tx}px,${ty}px,0) scale(${scale})`;
      img.style.transformOrigin = 'top left';
    }

    if (window.matchMedia('(pointer: coarse)').matches || window.innerWidth <= 767) {
      setupImagePointerInteraction(img);
    } else {
      enablePanZoomOnImage(img);
    }

  };
}

document.querySelectorAll('.tab').forEach(tab => {
  tab.addEventListener('click', function() {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    this.classList.add('active');
    const name = this.getAttribute('data-tab');
    document.getElementById(name + '-tab').classList.add('active');
    if (name === "layout") {
      initGridTemplates();
    }
    // Вот здесь вызываем
    updateCollageAndHintView();
  });
});


document.getElementById('upload-btn').addEventListener('click', () => {
  document.getElementById('file-input').click();
});

document.getElementById('file-input').addEventListener('change', function(e) {
  const files = Array.from(e.target.files);

  if (uploadedImages.length + files.length > 20) {
    alert('Нельзя загрузить более 20 изображений за раз');
    return;
  }

  files.forEach(file => {

    if (!file.type.match(/^image\/(jpeg|jpg|png|webp)$/)) {
      alert('Неподдерживаемый формат: ' + file.name);
      return;
    }

    if (file.size > 10 * 1024 * 1024) {
      alert('Файл слишком большой (более 10 МБ): ' + file.name);
      return;
    }

    getImageSrc(file)
      .then(src => processImage(src, file.size))
      .then(finalSrc => {

        const imgObj = {
          id: genId(),
          src: finalSrc
        };
        uploadedImages.push(imgObj);

        const thumbDiv = document.createElement('div');
        thumbDiv.className = 'thumbnail-container';
        const thumbImg = document.createElement('img');
        thumbImg.loading = 'lazy';
        thumbImg.src = finalSrc;
        thumbImg.className = 'thumbnail';
        thumbImg.dataset.id = imgObj.id;

        const thumbRemove = document.createElement('button');
        thumbRemove.className = 'remove-btn';
        thumbRemove.textContent = '✕';
        thumbRemove.onclick = () => {

          const idx = uploadedImages.findIndex(x => x.id === imgObj.id);
          if (idx !== -1) uploadedImages.splice(idx, 1);
          thumbDiv.remove();

          collageCells.forEach(cell => {
            if (cell && cell.imageId === imgObj.id) {
              cell.imageId = null;
              cell.scale = 1;
              cell.tx = 0;
              cell.ty = 0;
            }
          });
          renderCollage();
		  updateCollageAndHintView();
        };

        thumbDiv.append(thumbImg, thumbRemove);
        document.getElementById('thumbnails').append(thumbDiv);
        renderCollage();
		updateCollageAndHintView();
      })
      .catch(err => {
        console.error(err);
        alert('Не удалось загрузить файл: ' + file.name);
      });
  });

  e.target.value = '';
});

document.querySelectorAll('#format-tabs .format-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    document.querySelectorAll('#format-tabs .format-btn').forEach(b => b.classList.remove('selected'));
    this.classList.add('selected');
    currentFormat = this.getAttribute('data-ratio');

    collagePreview.style.aspectRatio = currentFormat.replace(':', '/');
    updateCollagePreviewSize();
    renderCollage();
  });
});

document.querySelectorAll('.count-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    document.querySelectorAll('.count-btn').forEach(b => b.classList.remove('selected'));
    this.classList.add('selected');
    currentCount = parseInt(this.dataset.count, 10) || 3;

    selectedGrid = null;
    initGridTemplates();
    renderCollage();
  });
});

const spacingSlider = document.getElementById('spacing');
const spacingValue = document.getElementById('spacing-value');
spacingSlider.addEventListener('input', function() {
  collageStyle.gap = parseInt(this.value, 10);
  spacingValue.textContent = this.value;
  updateCollageStyle();
  updateCollagePreviewSize();
  renderCollage();
});

document.querySelectorAll('.color-preset').forEach(preset => {
  preset.addEventListener('click', function() {
    document.querySelectorAll('.color-preset').forEach(p => p.classList.remove('selected'));
    this.classList.add('selected');
    collageStyle.bgColor = this.dataset.color;
    updateCollageStyle();
    if (this.id === 'color-picker-2') {
      document.getElementById('hidden-color-picker-2').click();
    }
  });
});
document.getElementById('hidden-color-picker-2').addEventListener('input', function() {
  collageStyle.bgColor = this.value;
  updateCollageStyle();
});

function showCollagePreview() {
  const modal = document.getElementById('preview-modal');
  const container = document.getElementById('preview-canvas-container');
  const preview = document.getElementById('collage-preview');
  const bg = collageStyle.bgColor || '#ffffff';

  const dpr = 2;
  const previewRect = preview.getBoundingClientRect();

  const canvas = document.createElement('canvas');
  canvas.width = previewRect.width * dpr;
  canvas.height = previewRect.height * dpr;
  const ctx = canvas.getContext('2d');

  ctx.fillStyle = bg;
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  const cells = Array.from(preview.querySelectorAll('.collage-cell'));
  cells.forEach(cell => {
    const img = cell.querySelector('.collage-cell-img');
    if (!img) return;

    // 1. точные координаты ячейки
    const cellRect = cell.getBoundingClientRect();
    const x = cellRect.left - previewRect.left;
    const y = cellRect.top  - previewRect.top;

    // 2. матрица трансформации картинки
    const style = window.getComputedStyle(img);
    const m = style.transform.match(/matrix\(([^)]+)\)/);
    let a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0;
    if (m) [a, b, c, d, tx, ty] = m[1].split(',').map(parseFloat);

    ctx.save();
    ctx.beginPath();
    ctx.rect(x * dpr, y * dpr, cellRect.width * dpr, cellRect.height * dpr);
    ctx.clip();

    ctx.setTransform(
      a * dpr,
      b * dpr,
      c * dpr,
      d * dpr,
      (tx + x) * dpr,
      (ty + y) * dpr
    );
    ctx.drawImage(img, 0, 0);
    ctx.restore();
  });

  container.innerHTML = '';
  canvas.style.maxWidth = '90vw';
  canvas.style.maxHeight = '75vh';
  container.appendChild(canvas);

  document.getElementById('preview-download').onclick = () => {
    const a = document.createElement('a');
    a.href = canvas.toDataURL('image/png');
    a.download = 'collage.png';
    a.click();
  };

  // Кнопка «Заказать коллаж» — отправляет коллаж в калькулятор родительской страницы
  document.getElementById('preview-order').onclick = () => {
    if (window.parent && window.parent !== window) {
      var dataUrl = canvas.toDataURL('image/png');
      window.parent.postMessage({
        type: 'MUSE_COLLAGE_ORDER',
        dataUrl: dataUrl,
        format: currentFormat   // e.g. "4:3", "1:1", "3:4" etc.
      }, '*');
    } else {
      // Если открыто напрямую (не в iframe) — скачать
      const a = document.createElement('a');
      a.href = canvas.toDataURL('image/png');
      a.download = 'collage.png';
      a.click();
    }
  };

  modal.style.display = 'flex';
  document.body.style.overflow = 'hidden';
}

function resetStyleAndBackground() {

  const slider = document.getElementById('spacing');
  slider.value = 5;
  document.getElementById('spacing-value').textContent = '5';
  collageStyle.gap = 5;
  collageStyle.bgColor = '#e6e6e6';
  const hiddenPicker = document.getElementById('hidden-color-picker-2');
  if (hiddenPicker) hiddenPicker.value = '#e6e6e6';
  document.querySelectorAll('.color-preset').forEach(p => p.classList.remove('selected'));
  const def = document.querySelector('.color-preset[data-color="#e6e6e6"]');
  if (def) def.classList.add('selected');

  uploadedImages = [];
  if (window.collageCells) window.collageCells = [];

  document.getElementById('thumbnails').innerHTML = '';
  document.getElementById('collage-preview').innerHTML = '';

  renderCollage();
  updateCollageStyle();
}

document.getElementById('preview-btn').addEventListener('click', showCollagePreview);

document.getElementById('preview-close').addEventListener('click', () => {
  document.getElementById('preview-modal').style.display = 'none';
  document.body.style.overflow = '';
});

document.getElementById('preview-modal').addEventListener('click', e => {
  if (e.target === e.currentTarget) {
    document.getElementById('preview-modal').style.display = 'none';
    document.body.style.overflow = '';
  }
});

document.addEventListener('DOMContentLoaded', () => {
  initGridTemplates();
  renderCollage();
  updateCollageStyle();
  updateCollagePreviewSize();
});
document.getElementById('hand-mode-btn').addEventListener('click', function() {
  handMode = !handMode;
  document.getElementById('hand-panel').classList.toggle('active', handMode);

  document.querySelectorAll('.collage-cell-img, .cell-remove').forEach(el => {
    el.style.pointerEvents = handMode ? 'none' : '';
  });

  const thumbs = document.getElementById('thumbnails');
  if (thumbs) {
    if (handMode) {
      thumbs.classList.add('hidden-by-handmode');
    } else {
      thumbs.classList.remove('hidden-by-handmode');
    }
  }

  const mainArea = document.querySelector('.main-area');
  if (mainArea) {
    if (handMode) {
      mainArea.classList.add('handmode-active');
    } else {
      mainArea.classList.remove('handmode-active');
    }
  }
});
window.addEventListener('resize', () => {
  updateCollagePreviewSize();
});
function updateActiveCell(x, y) {

  const el = document.elementFromPoint(x, y);
  const cell = el && el.closest('.collage-cell');

  document.querySelectorAll('.collage-cell').forEach(c => c.classList.toggle('highlight', c === cell));

  window.activeCell = cell;
}

function highlightDropZones(enable) {
  document.querySelectorAll('.collage-cell').forEach(cell =>
    cell.classList.toggle('highlight', enable && cell === window.activeCell)
  );
}

let dragGhost;
let ghostWidth = 0,
  ghostHeight = 0;
let startX = 0,
  startY = 0;
let dragging = false,
  dragTarget = null;

const threshold = 30,
  tolerance = 20;
const thumbs = document.getElementById('thumbnails');
const isMobile = window.matchMedia('(max-width:900px)').matches;

if (thumbs) {
  thumbs.addEventListener('pointerdown', ev => {
    const thumb = ev.target.closest('.thumbnail');
    if (!thumb) return;

    if (dragGhost) dragGhost.remove();

    startX = ev.clientX;
    startY = ev.clientY;
    dragTarget = thumb;
    dragging = false;

    function onMove(ev) {
      const dx = ev.clientX - startX;
      const dy = ev.clientY - startY;

      if (!dragging) {
        const len = Math.hypot(dx, dy);
        const angle = Math.atan2(-dy, dx) * 180 / Math.PI;
        const delta = Math.abs(angle - 90);
        const mobileCond = isMobile && len > threshold && delta < 85;

        const desktopCond = !isMobile && len > 10;
        if (mobileCond || desktopCond) {

          dragGhost = dragTarget.cloneNode(true);
          dragGhost.classList.add('drag-ghost');
          dragGhost.style.position = 'fixed';
          dragGhost.style.pointerEvents = 'none';
          document.body.appendChild(dragGhost);

          ghostWidth = dragGhost.offsetWidth;
          ghostHeight = dragGhost.offsetHeight;

          dragging = true;
        } else {
          return;
        }
      }

      dragGhost.style.left = (ev.clientX - ghostWidth / 2) + 'px';
      dragGhost.style.top = (ev.clientY - ghostHeight / 2) + 'px';

      updateActiveCell(ev.clientX, ev.clientY);

      ev.preventDefault();
    }

    function onUp(ev) {

      if (dragGhost) dragGhost.remove();

      if (dragging && dragTarget && activeCell) {
        const imageId = dragTarget.dataset.id;
        addImageToCell(activeCell, imageId);
      }

      highlightDropZones(false);

      dragging = false;
      dragGhost = null;
      dragTarget = null;

      window.removeEventListener('pointermove', onMove);
      window.removeEventListener('pointerup', onUp);
      window.removeEventListener('pointercancel', onUp);
    }

    window.addEventListener('pointermove', onMove, {
      passive: false
    });
    window.addEventListener('pointerup', onUp);
    window.addEventListener('pointercancel', onUp);
  });
}

document.addEventListener('contextmenu', e => {
  if (e.target.closest('.thumbnail, .collage-cell-img')) {
    e.preventDefault();
    return false;
  }
}, {
  passive: false
});

(function() {
  const dragZone = document.body;

  ['dragenter', 'dragover'].forEach(evt => {
    dragZone.addEventListener(evt, e => {

      if (e.target.closest('#file-input, .remove-btn, #zoom-btn')) return;
      e.preventDefault();
      document.body.classList.add('drag-over');
    });
  });

  ['dragleave', 'drop'].forEach(evt => {
    dragZone.addEventListener(evt, e => {
      if (e.target.closest('#file-input, .remove-btn, #zoom-btn')) return;
      e.preventDefault();
      document.body.classList.remove('drag-over');
    });
  });

  dragZone.addEventListener('drop', e => {
    if (e.target.closest('#file-input, .remove-btn, #zoom-btn')) return;
    e.preventDefault();
    const files = Array.from(e.dataTransfer.files);

    if (uploadedImages.length + files.length > 20) {
      alert('Нельзя загрузить более 20 изображений за раз');
      return;
    }

    files.forEach(file => {

      if (!file.type.match(/^image\/(jpeg|jpg|png|webp)$/)) {
        alert('Неподдерживаемый формат: ' + file.name);
        return;
      }

      if (file.size > 10 * 1024 * 1024) {
        alert('Файл слишком большой (более 10 МБ): ' + file.name);
        return;
      }

      getImageSrc(file)
        .then(src => processImage(src, file.size))
        .then(finalSrc => {

          const imgObj = {
            id: genId(),
            src: finalSrc
          };
          uploadedImages.push(imgObj);

          const thumbDiv = document.createElement('div');
          thumbDiv.className = 'thumbnail-container';

          const thumbImg = document.createElement('img');
          thumbImg.loading = 'lazy';
          thumbImg.src = finalSrc;
          thumbImg.className = 'thumbnail';
          thumbImg.dataset.id = imgObj.id;

          const thumbRemove = document.createElement('button');
          thumbRemove.className = 'remove-btn';
          thumbRemove.textContent = '✕';
          thumbRemove.onclick = () => {

            const idx = uploadedImages.findIndex(x => x.id === imgObj.id);
            if (idx !== -1) uploadedImages.splice(idx, 1);
            thumbDiv.remove();

            collageCells.forEach(cell => {
              if (cell && cell.imageId === imgObj.id) {
                cell.imageId = null;
                cell.scale = 1;
                cell.tx = 0;
                cell.ty = 0;
              }
            });
            renderCollage();
			updateCollageAndHintView();
          };

          thumbDiv.append(thumbImg, thumbRemove);
          document.getElementById('thumbnails').append(thumbDiv);
          renderCollage();
        })
        .catch(console.error);
    });
  });

})();

collagePreview.addEventListener('wheel', function(e) {
  if (!handMode) return;
  e.preventDefault();
  let scale = collageTransform.scale;
  let delta = -e.deltaY * 0.001;
  scale = Math.max(0.5, Math.min(2, scale * (1 + delta)));
  collageTransform.scale = scale;
  updateCollageTransformThrottled();
  updateZoomValue();
}, {
  passive: false
});

let dragStart = {
  x: 0,
  y: 0,
  cx: 0,
  cy: 0
};
collagePreview.addEventListener('pointerdown', function(e) {
  if (!handMode) return;
  isDragging = true;
  dragStart.x = e.clientX;
  dragStart.y = e.clientY;
  dragStart.cx = collageTransform.x;
  dragStart.cy = collageTransform.y;
  collagePreview.setPointerCapture(e.pointerId);
});

collagePreview.addEventListener('pointermove', function(e) {
  if (!handMode || !isDragging) return;
  collageTransform.x = dragStart.cx + (e.clientX - dragStart.x);
  collageTransform.y = dragStart.cy + (e.clientY - dragStart.y);
  updateCollageTransformThrottled();
});
['pointerup', 'pointerleave', 'pointercancel'].forEach(evt => {
  collagePreview.addEventListener(evt, function() {
    isDragging = false;
  });
});

let pinch = {
  active: false,
  startDist: 0,
  startScale: 1
};
let pan = {
  active: false,
  startX: 0,
  startY: 0,
  startCX: 0,
  startCY: 0
};

collagePreview.addEventListener('touchstart', function(e) {
  if (!handMode) return;

  if (e.touches.length === 2) {
    pinch.active = true;
    pan.active = false;
    const dx = e.touches[1].clientX - e.touches[0].clientX;
    const dy = e.touches[1].clientY - e.touches[0].clientY;
    pinch.startDist = Math.hypot(dx, dy);
    pinch.startScale = collageTransform.scale;
  }
  if (e.touches.length === 1 && !pinch.active) {
    pan.active = true;
    const t = e.touches[0];
    pan.startX = t.clientX;
    pan.startY = t.clientY;
    pan.startCX = collageTransform.x;
    pan.startCY = collageTransform.y;
  }
}, {
  passive: false
});

collagePreview.addEventListener('touchmove', function(e) {
  if (!handMode) return;

  if (e.touches.length === 2 && pinch.active) {
    e.preventDefault();
    const dx = e.touches[1].clientX - e.touches[0].clientX;
    const dy = e.touches[1].clientY - e.touches[0].clientY;
    const dist = Math.hypot(dx, dy);
    let scale = pinch.startScale * dist / pinch.startDist;
    scale = Math.max(0.5, Math.min(2, scale));
    collageTransform.scale = scale;
    updateCollageTransformThrottled();
    updateZoomValue();
    pan.active = false;
  } else if (e.touches.length === 1 && pan.active && !pinch.active) {
    e.preventDefault();
    const t = e.touches[0];
    collageTransform.x = pan.startCX + (t.clientX - pan.startX);
    collageTransform.y = pan.startCY + (t.clientY - pan.startY);
    updateCollageTransformThrottled();
  }
}, {
  passive: false
});

collagePreview.addEventListener('touchend', function(e) {
  if (e.touches.length < 2) pinch.active = false;
  if (e.touches.length === 0) pan.active = false;

});

let needsUpdate = false;
let ticking = false;

function updateCollageTransformThrottled() {
  needsUpdate = true;
  if (!ticking) {
    requestAnimationFrame(() => {
      needsUpdate = false;
      ticking = false;
      collagePreview.style.transform = `translate(${collageTransform.x}px,${collageTransform.y}px) scale(${collageTransform.scale})`;
      collagePreview.style.transformOrigin = '0 0';
    });
    ticking = true;
  }
}
document.getElementById('zoom-value').addEventListener('click', function() {
  collageTransform.scale = 1;
  collageTransform.x = 0;
  collageTransform.y = 0;
  updateCollageTransformThrottled();
  updateZoomValue();
});
document.getElementById('zoom-reset-btn').addEventListener('click', function() {
  collageTransform.scale = 1;
  collageTransform.x = 0;
  collageTransform.y = 0;
  updateCollageTransformThrottled();
  updateZoomValue();
});
(function() {
  var panel = document.getElementById('hand-panel');
  var isDragging = false,
    startX = 0,
    startY = 0,
    origX = 0,
    origY = 0;

  panel.addEventListener('mousedown', function(e) {
    if (e.target.closest('button, input, a, .zoom-value')) return;
    isDragging = true;
    startX = e.clientX;
    startY = e.clientY;
    var rect = panel.getBoundingClientRect();
    origX = rect.left;
    origY = rect.top;
    document.body.style.userSelect = 'none';
  });
  document.addEventListener('mousemove', function(e) {
    if (!isDragging) return;
    var dx = e.clientX - startX;
    var dy = e.clientY - startY;
    panel.style.left = (origX + dx) + 'px';
    panel.style.top = (origY + dy) + 'px';
    panel.style.bottom = 'auto';
    panel.style.right = 'auto';
  });
  document.addEventListener('mouseup', function() {
    isDragging = false;
    document.body.style.userSelect = '';
  });

  panel.addEventListener('touchstart', function(e) {

    if (e.target.closest('button, input, a, .zoom-reset-btn')) return;
    isDragging = true;
    startX = e.touches[0].clientX;
    startY = e.touches[0].clientY;
    var rect = panel.getBoundingClientRect();
    origX = rect.left;
    origY = rect.top;
  }, {
    passive: false
  });

  document.addEventListener('touchmove', function(e) {
    if (!isDragging) return;
    var dx = e.touches[0].clientX - startX;
    var dy = e.touches[0].clientY - startY;
    panel.style.left = (origX + dx) + 'px';
    panel.style.top = (origY + dy) + 'px';
    panel.style.bottom = 'auto';
    panel.style.right = 'auto';
    e.preventDefault();
  }, {
    passive: false
  });
  document.addEventListener('touchend', function() {
    isDragging = false;
  });

})();
function updateCollageAndHintView() {
  const activeTab = document.querySelector('.tab.active').dataset.tab;
  const hint = document.getElementById('collage-hint');
  const collage = document.getElementById('collage-preview');

  if (activeTab === 'upload') {
    hint.style.display = 'flex';
    collage.style.display = 'none';
  } else {
    hint.style.display = 'none';
    collage.style.display = 'grid'; // или '', если так было по умолчанию
  }
}

document.querySelectorAll('#format-tabs .format-btn').forEach(btn => {
  const shape = btn.querySelector('.format-shape');
  const ratio = btn.getAttribute('data-ratio');
  if (!shape || !ratio) return;
  const [x, y] = ratio.split(':').map(Number);
  const ICON_SIZE = 64;
  let w, h;
  if (x >= y) {
    w = ICON_SIZE;
    h = ICON_SIZE * (y / x);
  } else {
    h = ICON_SIZE;
    w = ICON_SIZE * (x / y);
  }
  shape.style.width = w + 'px';
  shape.style.height = h + 'px';
  shape.style.marginTop = ((ICON_SIZE - h) / 2) + 'px';
  shape.style.marginBottom = ((ICON_SIZE - h) / 2) + 'px';
  shape.style.marginLeft = ((ICON_SIZE - w) / 2) + 'px';
  shape.style.marginRight = ((ICON_SIZE - w) / 2) + 'px';
});

function updateCollageAndHintView() {
  const activeTab = document.querySelector('.tab.active').dataset.tab;
  const hint = document.getElementById('collage-hint');
  const collage = document.getElementById('collage-preview');

  if (activeTab === 'upload') {
    hint.style.display = 'flex';
    collage.style.display = 'none';
  } else {
    hint.style.display = 'none';
    collage.style.display = 'grid'; // или '', если так было по умолчанию
  }
}
window.addEventListener('DOMContentLoaded', updateCollageAndHintView);

</script>
</body>
</html>