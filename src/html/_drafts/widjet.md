Виджет мессенджеров (Floating Messenger Widget)
Назначение

Виджет предназначен для ненавязчивого отображения доступных каналов связи (мессенджеров) на сайте. Он появляется с задержкой после загрузки страницы, открывается по клику и автоматически сворачивается при взаимодействии пользователя со страницей (клик вне области или скролл).

Виджет реализован без сторонних JS-библиотек и может быть легко встроен в любой проект.

Используемые технологии
Frontend

HTML5 — семантическая разметка

Tailwind CSS 4 (utility-first) — стилизация, позиционирование и анимации

Vanilla JavaScript (ES6) — управление состоянием и событиями

SVG — иконки мессенджеров (векторные, масштабируемые)

Зависимости

Tailwind CSS подключается через CDN

JS — встроенный, без фреймворков и зависимостей

Архитектура компонента
Основные элементы
#messengerWidget   — корневой контейнер виджета
#messengerToggle   — кнопка открытия / закрытия
#messengerList     — список иконок мессенджеров


Виджет фиксирован (position: fixed) и расположен в правом нижнем углу экрана

Список иконок позиционируется относительно кнопки и раскрывается вверх

Логика работы
1. Отложенное появление

После загрузки страницы виджет не отображается сразу.

setTimeout(() => {
  widget.classList.remove('hidden');
}, 10000);


Задержка: 10 секунд

Появляется только кнопка, без списка

Такое поведение соответствует UX-практикам (Intercom / WhatsApp / Jivo)

2. Открытие и закрытие

Состояние управляется через aria-expanded и CSS-классы.

Открытие:

Клик по кнопке

Список иконок становится видимым

Иконка кнопки визуально меняется (поворот)

Закрытие:

Повторный клик по кнопке

Клик вне области виджета

Скролл страницы

toggle.getAttribute('aria-expanded') === 'true'
  ? closeList()
  : openList();

Анимация

Анимации реализованы исключительно через CSS, без JS-таймеров.

Используемые свойства

opacity

transform: scale

transform: translateY

transition-all

opacity-0 → opacity-100
scale-95  → scale-100
translate-y-2 → translate-y-0

Почему так

GPU-ускорение

Отсутствие layout-thrashing

Плавная работа на мобильных устройствах

Простота поддержки

Поведение при клике вне области

Для закрытия используется глобальный обработчик:

document.addEventListener('click', (e) => {
  if (!widget.contains(e.target)) closeList();
});


Работает и на desktop, и на mobile

Не требует overlay

Не блокирует прокрутку страницы

Автосворачивание при скролле
window.addEventListener('scroll', closeList, { passive: true });


Список закрывается при любом scroll-событии

Используется passive: true для оптимизации производительности

Это предотвращает перекрытие контента при активном взаимодействии пользователя со страницей

Доступность (Accessibility)

Виджет учитывает базовые требования доступности:

aria-expanded — отражает состояние раскрытия

aria-label — текстовое описание кнопки

focus:ring — визуальный фокус для клавиатурной навигации

SVG без лишних декоративных элементов

Иконки

Используются SVG-иконки из мобильного меню

Размер иконки: 24×24 px

Размер кнопки: 48×48 px

Цвета соответствуют официальным цветам брендов

Все иконки визуально выровнены и не «пляшут»

Производительность

Минимальный JS-код

Нет reflow при анимациях

Нет сторонних библиотек

Можно безопасно использовать на страницах с высокой нагрузкой