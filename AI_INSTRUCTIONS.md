# Инструкции для ИИ-агента

## ⚠️ ВАЖНО: Прочитай перед началом работы

### 1. Ознакомься с документацией

**ОБЯЗАТЕЛЬНО прочитай эти файлы перед началом работы:**

| Файл | Что содержит |
|------|--------------|
| `docs/DESIGN_SYSTEM.md` | Цвета, типографика, компоненты — **ОСНОВНОЙ ИСТОЧНИК** |
| `docs/PURE_TAILWIND_GUIDE.md` | Инструкция по рефакторингу на чистый Tailwind CSS |
| `docs/PAGES_LIST.md` | Статус всех страниц проекта |

### 2. НЕ изменяй документацию

❌ **ЗАПРЕЩЕНО** изменять файлы документации (`*.md`) без явного согласования с пользователем.

Если считаешь, что нужно что-то добавить в документацию — **сначала спроси**.

### 3. Эталонная страница

**Эталон:** `src/html/portret-na-zakaz-po-foto-na-kholste-sankt-peterburg.html`

Бери из эталона:
- Компонентную навигацию `<nav class="arch-nav">`
- Структуру HTML и критический CSS
- Подключение скриптов (`js/nav.js`)

---

## Правила работы с контентом

### Источник контента

- **Источник:** Контент берём ТОЛЬКО с оригинала `muse.ooo`
- **Тексты:** НЕ менять, НЕ сокращать, НЕ перефразировать
- **Alt/Title:** Сохранять полностью, не укорачивать
- **Meta:** Title и description — 1:1 с оригинала

### Предупреждай об изменениях

Если что-то нужно изменить или убрать — **СНАЧАЛА СПРОСИ**.

Если количество элементов отличается от оригинала — **ПРЕДУПРЕДИ**.

### ⚠️ НЕ сокращай код без предупреждения

❌ **ЗАПРЕЩЕНО** сокращать, упрощать или "оптимизировать" JavaScript, CSS или HTML без явного согласования.

Примеры запрещённых действий:
- Убирать "лишние" обработчики событий
- Упрощать логику скриптов
- Удалять "ненужные" проверки и защиты
- Сокращать CSS правила

**Если считаешь, что код можно упростить — СНАЧАЛА СПРОСИ и объясни что именно хочешь убрать.**

---

## Критический CSS

Критический CSS — минимальный набор стилей для корректного отображения до загрузки Tailwind CDN.

### Обязательные стили:

```css
/* CSS переменные для цветов */
:root {
    --primary: #4A90E2;
    --primary-hover: #609DE6;
    --dark: #252525;
    --body: #666666;
    --secondary: #FAFAFA;
}

/* Body */
body {
    background-color: #fff;
    color: var(--body);
    overflow-x: hidden;
}

/* Screen reader only */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}
```

### Добавлять по необходимости:

| Компонент | Когда добавлять |
|-----------|-----------------|
| `.page-navigator` | Если есть боковая навигация |
| `.carousel-scroll` | Если есть карусели |
| `.ba-card` | Если есть слайдер "До/После" |
| `.canvas-3d` | Если есть 3D-эффект на изображениях |
| Ken Burns (`@keyframes kenburns`) | Если есть анимация Hero-изображения |

**Полные стили компонентов см. в `docs/DESIGN_SYSTEM.md`**

### ⚠️ Цвета — с перевёрстываемой страницы

Цвета берём со страницы, которую перевёрстываем, НЕ из эталона!

---

## Скрипты

### Навигационные скрипты

Подключаются через внешний файл:

```html
<script src="js/nav.js"></script>
<!-- или для вложенных папок: -->
<script src="../../js/nav.js"></script>
```

Файл `nav.js` содержит:
- **Page Navigator** — подсветка активной секции при скролле
- **Back to Top** — показ/скрытие кнопки "Наверх"

### Inline-скрипты (добавлять по необходимости)

**Video Cover** — если есть видео с обложкой:
```html
<script>
document.querySelectorAll('[data-video-cover]').forEach(function(cover) {
    const playBtn = cover.querySelector('[data-play-btn]');
    if (playBtn) {
        playBtn.addEventListener('click', function() {
            cover.classList.add('video-playing');
            const iframe = cover.querySelector('iframe');
            if (iframe && iframe.dataset.src) {
                iframe.src = iframe.dataset.src + '&autoplay=1';
            }
        });
    }
});
</script>
```

**Carousel Scroll** — если есть карусель (полный скрипт в `docs/DESIGN_SYSTEM.md`):
```html
<script>
document.querySelectorAll('.carousel-scroll').forEach(function(carousel) {
    // Wheel scroll + Drag-to-scroll + Click protection
    // См. полный код в DESIGN_SYSTEM.md
});
</script>
```

---

## Базовые правила

### Шрифты
Системные шрифты (не подключаем веб-шрифты).

### Ширина контейнера
`1170px` на десктопе. Используй класс `container` (настроен в CSS).

### Брейкпоинты
Стандартные Tailwind: `sm: 640px`, `md: 768px`, `lg: 1024px`, `xl: 1280px`, `2xl: 1536px`.

### Хлебные крошки
Разделитель — символ `/` (не стрелка).

### Ссылки в тексте
- Стиль: `text-primary underline hover:no-underline`
- Стрелки: `↑` (вверх по странице), `↓` (вниз), `↗` (внешняя/другая страница)

---

## Изображения

| Атрибут | Правило |
|---------|---------|
| Формат | `.webp` |
| `width` | Обязательно (в пикселях) |
| `height` | Обязательно (в пикселях) |
| `loading` | `lazy` (кроме первого экрана) |
| `decoding` | `async` |
| `alt` | С оригинала, НЕ сокращать |
| `title` | Если есть на оригинале — сохранить |

---

## Видео

| Атрибут | Правило |
|---------|---------|
| `preload` | `none` (всегда) |
| `playsinline` | Да |
| `muted` | Обязательно для автовоспроизведения |

❌ **Запрещено:**
- `webkit-playsinline` (невалидный атрибут)
- `loading="lazy"` на `<video>` (невалидный атрибут)

---

## Формы и accessibility

### Формы
- Каждый `<input>` и `<select>` должен иметь `<label>`
- Если placeholder достаточен — использовать `sr-only` для скрытия label

### Ссылки
- Текстовые ссылки должны иметь `underline` (для различимости)

---

## Тестирование

### Локально
`start-mobile-server.bat`

### Деплой
`БЫСТРЫЙ_ДЕПЛОЙ.bat`

### Валидация HTML
После завершения — проверить через [W3C Validator](https://validator.w3.org/nu/).

---

## Чек-лист перед завершением

- [ ] Контент совпадает с оригиналом `muse.ooo`
- [ ] Количество элементов совпадает (примеры, FAQ, преимущества)
- [ ] Изображения: webp, width, height, loading, decoding, alt
- [ ] Видео: preload="none", muted для автоплея
- [ ] Формы: label для каждого поля
- [ ] Ссылки: underline для текстовых ссылок
- [ ] Кнопка "Наверх" (Back to Top) присутствует
- [ ] Inline-скрипты добавлены (Video Cover, Carousel Scroll — если нужны)
- [ ] HTML валидация пройдена
