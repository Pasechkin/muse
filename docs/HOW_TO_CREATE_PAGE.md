# Как создать новую страницу

Пошаговая инструкция для ИИ-агента и разработчика.

---

## ⚠️ ВАЖНО: Нет единого эталона!

В проекте **нет единого эталона для всех страниц**. Каждая группа страниц имеет свой эталон.

### Эталоны по группам

| Группа страниц | Эталон | Путь |
|----------------|--------|------|
| **Главные страницы** | index.html | `src/html/index.html` |
| **Стили портретов** | portret-maslom.html | `src/html/portret-na-zakaz/style/portret-maslom.html` |
| **Объекты портретов** | muzhskoy-portret.html | `src/html/portret-na-zakaz/object/muzhskoy-portret.html` |
| **Блог** | kollazh-i-fotokollazh.html | `src/html/blog/kollazh-i-fotokollazh.html` |
| **Info** | kontakty.html | `src/html/info/kontakty.html` |
| **Остальные** | ориентир index.html | с учётом уникальности страницы |

**Перед созданием страницы определи её группу и открой соответствующий эталон!**

---

## Шаг 1: Подготовка

### 1.1 Прочитай документацию

| Файл | Зачем |
|------|-------|
| `AI_INSTRUCTIONS.md` | Правила работы, запреты, контент |
| `docs/DESIGN_SYSTEM.md` | Типографика, цвета, компоненты |
| `PROJECT.md` | Текущий статус и эталоны |

### 1.2 Определи группу и эталон

Открой эталон своей группы и возьми из него:
- Структуру `<head>` (meta, preload, critical CSS)
- Подключение CSS (`css/output.css`)
- Подключение скриптов (`js/nav.js`, при необходимости `js/tailwindplus-elements.js`)
- Структуру `<body>` (порядок секций, компоненты)

### 1.3 Найди источник контента

Контент берём **ТОЛЬКО** с оригинала `https://muse.ooo/[путь]/`

---

## Шаг 2: Создание файла

### 2.1 Именование файла

- Транслитерация с русского: `портрет маслом` → `portret-maslom.html`
- Разделитель — дефис: `beauty-art-portret.html`
- Только строчные буквы

### 2.2 Размещение

| Группа | Папка |
|--------|-------|
| Главные | `src/html/` |
| Стили портретов | `src/html/portret-na-zakaz/style/` |
| Объекты портретов | `src/html/portret-na-zakaz/object/` |
| Блог | `src/html/blog/` |
| Info | `src/html/info/` |

---

## Шаг 3: Структура страницы

### 3.1 Критический CSS

Копируй из эталона своей группы, но **цвета бери с перевёрстываемой страницы**:

```css
:root {
    --primary: #367abd;
    --primary-hover: #2d6699;
    --dark: #262626;
    --body: #525252;
    --secondary: #fafafa;
}
body {
    background-color: #fff;
    color: var(--body);
    overflow-x: hidden;
}
```

### 3.2 Типографика (семантические классы)

Используй классы из `src/input.css`:

| Класс | Назначение |
|-------|------------|
| `heading-hero` | H1 — главный заголовок (1 на страницу) |
| `heading-section` | H2 — заголовок секции |
| `heading-subsection` | H3 — подзаголовок |
| `heading-card` | H4 — заголовок карточки |
| `text-lead` | Вводный текст |
| `text-body` | Основной текст |
| `text-small` | Мелкий текст |

Цвет текста определяется **фоном секции** автоматически (CSS-каскад).

### 3.3 Подключение скриптов

Перед `</body>`:

```html
<!-- Если есть el-* компоненты -->
<script type="module" src="js/tailwindplus-elements.js"></script>

<!-- Всегда подключаем -->
<script src="js/nav.js"></script>
```

Для вложенных папок используй `../../js/nav.js`.

---

## Шаг 4: Правила контента

### ✅ Обязательно

- Тексты — 1:1 с оригинала muse.ooo
- Alt/Title — сохранять полностью
- Meta (title, description) — с оригинала
- Изображения — существующие пути, не выдумывать новые

### ❌ Запрещено

- Менять, сокращать, перефразировать тексты
- Придумывать контент
- Заменять плейсхолдеры `[ТЕКСТ: ...]` на выдуманные значения

### ⚠️ Header и Footer

**НЕ вставлять!** Оставить как комментарии или пустое место — будут добавлены после интеграции.

---

## Шаг 5: Проверка

### Чек-лист перед завершением

- [ ] Файл в правильной папке
- [ ] Структура из эталона группы
- [ ] Критический CSS минимальный
- [ ] Типографика — семантические классы
- [ ] Нет `.container` внутри `.container`
- [ ] SVG только inline `<svg>`
- [ ] Скрипты подключены (`nav.js` обязательно)
- [ ] Контент с оригинала muse.ooo
- [ ] Изображения с атрибутами (width, height, alt, loading)

### Сборка CSS

```bash
npm run build:once
npm run copy-css
```

---

## Промпты для ИИ-агента

### Создание новой страницы

```
Прежде чем начать, прочитай:
- @AI_INSTRUCTIONS.md
- @docs/DESIGN_SYSTEM.md

Создай страницу [НАЗВАНИЕ] в группе [ГРУППА].

Эталон группы: @[путь к эталону]
Источник контента: https://muse.ooo/[путь]/

Важно:
- Структуру и критический CSS бери из эталона группы
- Контент ТОЛЬКО с оригинала
- Header/Footer не вставлять
```

### Рефакторинг существующей страницы

```
Приведи страницу в соответствие с дизайн-системой.

Страница: @[путь к файлу]
Эталон группы: @[путь к эталону]

Проверь:
- Типографика (heading-*, text-body, text-lead)
- Отступы секций (py-16 lg:py-24)
- Контейнеры (один container на секцию)
- Скрипты (nav.js подключён)

НЕ ТРОГАТЬ контент (тексты, изображения, ссылки).
```

---

## Performance-оптимизация для длинных страниц

Для страниц с 5+ секциями применяй следующие оптимизации:

### Обязательные оптимизации

| Оптимизация | Как применить |
|-------------|---------------|
| **defer на nav.js** | `<script src="js/nav.js" defer></script>` — подключать перед `</body>` |
| **content-visibility: auto** | Добавь класс `content-auto` на секции below fold (ниже первого экрана) |
| **preload LCP-изображения** | `<link rel="preload" as="image" fetchpriority="high" href="...">` в `<head>` |
| **fetchpriority="high"** | На LCP-изображение (первое большое изображение на странице) |
| **loading="lazy"** | На все изображения КРОМЕ LCP |
| **Critical CSS inline** | Базовые CSS-переменные в `<style>` в `<head>` |

### Пример preload LCP-изображения

```html
<!-- В <head> после </style> -->
<link rel="preload" as="image" fetchpriority="high"
      href="https://muse.ooo/upload/img/lcp-image.webp"
      imagesrcset="...400w, ...600w, ...952w"
      imagesizes="(max-width: 767px) 100vw, 50vw">
```

### Пример content-auto на секциях

```html
<!-- Секции НИЖЕ первого экрана (below fold) -->
<section class="py-16 lg:py-20 content-auto" id="calc">...</section>
<section class="bg-dark py-16 lg:py-24 content-auto" id="order">...</section>
```

**НЕ ПРИМЕНЯТЬ content-auto к:**
- Hero-секции
- Первой секции после hero (может быть видна на больших экранах)
- Promo-баннерам (маленькие, не влияют на TBT)
- CTA-секциям в футере

### Результат

Эти оптимизации снижают TBT на 50-100ms и уменьшают количество long-tasks.

---

## Частые ошибки

| Ошибка | Как избежать |
|--------|--------------|
| Взял структуру не из того эталона | Определи группу страницы → открой её эталон |
| Выдумал контент | Всегда открывай оригинал на muse.ooo |
| Вложенные контейнеры | Секция full-width, внутри один `.container` |
| Забыл nav.js | Подключай перед `</body>` |
| Inline стили вместо классов | Используй семантические классы из input.css |
| Нет content-auto на длинных страницах | Добавь класс на секции below fold |
| Нет preload для LCP | Добавь `<link rel="preload">` в `<head>` |
