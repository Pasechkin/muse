РЕФАКТОРИНГ СТРАНИЦ СТИЛЕЙ ПОРТРЕТОВ — ИНСТРУКЦИИ ДЛЯ ИИ

Дата проверки эталона: 25.01.2026
Эталон: src/html/portret-na-zakaz/style/portret-maslom.html

ОБЩИЕ ПРАВИЛА
1) Не менять контент (тексты, alt, title, ссылки, порядок секций).
2) Не изменять Header/Footer без отдельного согласования.
3) Любые изменения в src/input.css требуют пересборки: npm run build:once, затем copy CSS.
4) Проверка результата — только через Live Server (src/html/…).
5) Все правки сначала делаем на эталоне, затем масштабируем на 17 остальных страниц.

СТАТУС ЭТАЛОНА (portret-maslom)
- Контейнеры: ✅ выполнено
- Преимущества: ✅ выполнено
- Видео: ✅ выполнено (iframe создается по клику)
- Page Navigator: ✅ выполнено (старый вариант)
Тогда нчни - Кнопки: ✅ выполнено (контентная часть), Header/Mobile — не трогать
- viewBox: ⏳ не выполнено (иконка 1 имеет viewBox 0 0 4500 4500)
- Иконки (оптимизация загрузки): ✅ выполнено
- Быстрый деплой: ⏳ статус неясен

---------------------------------
ЭТАП 0. ИКОНКИ (ОПТИМИЗАЦИЯ ЗАГРУЗКИ)
Цель: убрать блокирующие ресурсы и перейти на inline SVG.
Где менять: страницы в src/html/portret-na-zakaz/style/ и при необходимости src/input.css.
Шаги:
1) Проверить, есть ли use-ссылки или img-фолбэки.
2) Перевести иконки на inline SVG (см. Этап 5 “Преимущества”).
Проверка:
- Иконки рендерятся корректно во всех секциях

---------------------------------
ЭТАП 1. КОНТЕЙНЕРЫ
Цель: убрать двойные контейнеры и нормализовать .container.
Где менять: src/input.css и HTML страниц.
Шаги:
1) Проверить .container в src/input.css: должен иметь max-width: 1170px.
2) В HTML убрать двойные обертки вида: mx-auto px-4 max-w-[1170px] + вложенный .container.
Исключения: Header, Footer, CTA, где используется только один из паттернов.
Проверка:
- Нету двойных паддингов, контент центрирован, ширина 1170px.

---------------------------------
ЭТАП 2. КНОПКИ
Цель: сократить длинные классы в контенте до компонентных классов.
Где менять: src/input.css (если компонентов нет) и HTML в контентных секциях.
Шаги:
1) Проверить наличие .btn, .btn-primary, .btn-secondary, .btn-outline в src/input.css.
2) В контентных секциях заменить длинные классы на компоненты.
Ограничения:
- Не менять Header/Footer/Mobile меню.
Проверка:
- Визуально кнопки идентичны, hover/тени сохранены.

---------------------------------
ЭТАП 3. ПРОВЕРКА 0–1
Цель: зафиксировать, что контейнеры и иконки корректны на эталоне.
Шаги:
1) Открыть эталон и проверить ширину контейнера и отсутствие двойных оберток.
2) Проверить, что иконки не используют спрайты/фолбэки.
Проверка:
- Все секции в нормальной ширине, иконки корректны.

---------------------------------
ЭТАП 4. КАК ЗАКАЗАТЬ
Цель: унифицировать блок “Как заказать” через компоненты.
Где менять: HTML секции “Как заказать”.
Шаги:
1) Внедрить .step-container и .process-step.
2) Очистить лишнюю разметку и линию между шагами.
Проверка:
- Визуально совпадает с эталоном, разметка упрощена.

---------------------------------
ЭТАП 5. ПРЕИМУЩЕСТВА
Цель: единый компонентный блок “Преимущества”.
Где менять: секция id="preimushchestva" на каждой странице.
Шаги:
1) Секция: class="advantages-section".
2) Заголовок: class="advantages-title".
3) Сетка: class="advantages-grid".
4) Карточки: class="advantage-card".
5) Иконки: только inline SVG, класс icon-advantage.
6) Фон секции может быть разным:
	- По умолчанию (как в эталоне) — тёмный/синий фон.
	- Для белого фона использовать модификатор: advantages-section--light.
Проверка:
- Иконки окрашиваются через CSS, без filter/фолбеков.

---------------------------------
ЭТАП 6. ХАРАКТЕРИСТИКИ
Цель: унифицировать список характеристик.
Шаги:
1) Внедрить .check-list.
2) Заменить SVG-галочки на CSS-символ (по эталону).
Проверка:
- Список единообразный, лишние SVG удалены.

---------------------------------
ЭТАП 7. НАВИГАЦИЯ
Цель: проверить работу навигации по секциям.
Где менять: HTML и src/html/js/nav.js.
Шаги:
1) Убедиться, что навигатор присутствует и работает при скролле.
2) Проверить поведение на разных разрешениях.
Проверка:
- Подсветка секции корректна, навигатор не ломает верстку.

---------------------------------
ЭТАП 8. МАСШТАБИРОВАНИЕ
Цель: перенести изменения на 17 остальных страниц стилей.
Где менять: src/html/portret-na-zakaz/style/ (кроме portret-maslom.html).
Порядок: контейнеры → кнопки → преимущества → видео → навигация → прочее.

---------------------------------
ЭТАП. VIEWBOX (ОПЦИОНАЛЬНО)
Цель: оптимизировать слишком большой viewBox у уникальной иконки №1.
Факт: в эталоне viewBox = 0 0 4500 4500 (иконка 1).
Действие: при необходимости оптимизировать через SVGO.

---------------------------------
ЭТАП. ВИДЕО
Цель: iframe должен создаваться только по клику.
Факт: реализовано в эталоне и в src/html/js/nav.js.
Шаги:
1) Удалить iframe из DOM на старте.
2) Использовать data-video-cover и data-play-btn.
3) По клику создавать iframe и добавлять класс video-playing.
Проверка:
- Нет мигания, iframe отсутствует до клика.

---------------------------------
ЭТАП. PAGE NAVIGATOR
Цель: сохранить/проверить старый навигатор (точки) без замены на arch-nav.
Факт: эталон использует старый навигатор.
Проверка:
- Навигатор присутствует, работает корректно.

---------------------------------
КОМПОНЕНТ: ПРОМО-БАННЕР (АКЦИЯ)
Цель: единый компонент для вставки через 1С‑Битрикс.
Где используется: главная и другие страницы (по наличию акции).

HTML-шаблон:
<div class="bg-primary text-white py-6">
	<div class="container">
		<div class="flex items-center justify-center">
			<p class="text-xl">Текст акции</p>
		</div>
	</div>
</div>

Правила:
1) Текст акции не менять, если приходит из CMS.
2) Фон и отступы фиксированные: bg-primary + py-6.
3) Центрирование всегда через flex.

---------------------------------
КОМПОНЕНТ: FAQ-АККОРДЕОН (details/summary)
Цель: единая структура FAQ без JS, с доступностью и schema.org.
Где используется: страницы с FAQ (печать, портреты и т.д.).

База:
- Каждый вопрос — <details> с itemprop="mainEntity" + schema.org Question/Answer.
- Заголовок — <summary> с иконкой стрелки и классами для hover/rotate.
- Ответ — блок <div class="text-body" itemprop="text"> внутри acceptedAnswer.

Правила:
1) Не менять структуру schema.org и aria‑атрибуты.
2) Не заменять <details> на кастомный JS без согласования.
3) Иконка стрелки — SVG со rotate через group-open.

Примечания:
- Блок FAQ есть на страницах «Портрет на заказ» и «Печать на холсте».
- Для этих страниц запланировать замену протокола schema.org http → https (позже, отдельной задачей).

---------------------------------
ЭТАП. БЫСТРЫЙ ДЕПЛОЙ
Проблема: статус неясен, периодически ломается.
Действие:
1) Проверить запуск БЫСТРЫЙ_ДЕПЛОЙ.bat.
2) Если bat нестабилен — использовать БЫСТРЫЙ_ДЕПЛОЙ.ps1 и лог deploy-log.txt.
3) Если оба способа падают — выполнить вручную: build:once → copy-css → git add/commit/push.
Проверка:
- Деплой завершен, Vercel обновился.

---------------------------------
СПИСОК СТРАНИЦ ДЛЯ МАСШТАБИРОВАНИЯ
src/html/portret-na-zakaz/style/
1) portret-maslom.html — ✅ эталон
2) portret-karandashom.html — ✅
3) portret-akvarelyu.html — ✅
4) portret-komiks.html — ✅
5) portret-iz-slov.html — ✅
6) portret-flower-art.html — ✅
7) portret-v-obraze.html — ✅
8) pop-art-portret.html — ✅
9) graffiti-portret.html — ✅
10) granzh-portret.html — ✅
11) beauty-art-portret.html — ✅
12) drim-art-portret.html — ✅
13) fantasy-art-portret.html — ✅
14) fotomozaika.html — ✅

---------------------------------
СВОДКА РАБОТ (ЧАТ 25–26.01.2026)
1) Главная страница портретов (portret-na-zakaz-po-foto-na-kholste-sankt-peterburg.html):
	- Блок категорий приведён к «логотипам» (logo cloud) с круглыми миниатюрами.
	- «Характеристики» переведены на компонент со списком .check-list и чередованием фона.
	- «Как заказать» переведён на компонент order-steps (тёмный фон).
	- «Преимущества» переведены на компонент advantages (карточки, inline SVG).
	- Иконки преимуществ увеличены до размера эталона (w-10/h-10).
	- FAQ стрелки проверены, изменений не требовалось.
	- Калькулятор не трогали.

2) Слайдеры на страницах стилей:
	- Унифицированы миниатюры до 4 колонок (grid-cols-4).
	- Добавлены дубли 3-й миниатюры и панели, если нет 3-го изображения (для сохранения 4 колонок и скрытого видео-слота).
	- Применено ко всем стилям в src/html/portret-na-zakaz/style/*.html, включая graffiti/granzh.

3) Портрет маслом (эталон):
	- Исправлена высота кнопок миниатюр (h-20 вместо h-16), чтобы не были визуально уже.

Итого: визуальная унификация компонентов и слайдеров по всем стилям выполнена, тексты/alt/title/порядок секций не менялись.
15) love-is-portret.html — ✅
16) low-poly-portret.html — ✅
17) sharzh-po-foto.html — ✅
18) wpap-portret.html — ✅

---------------------------------
РАЗДЕЛ. ГЛАВНЫЕ СТРАНИЦЫ — СТАРТ С ГЛАВНОЙ

ДВУХЧАСТНЫЙ ПЛАН
ЧАСТЬ A. ОБЩИЕ ДЛЯ ВСЕХ СТРАНИЦ (БЕЗ ВИДЕО/ПРЕИМУЩЕСТВ/ЧЕК-ЛИСТОВ/SVG/«КАК ЗАКАЗАТЬ»)
Эталон общего: src/html/portret-na-zakaz/style/portret-maslom.html.
Правило эталона: применяем только для общих компонентов и совпадающих по структуре блоков.
Уникальные секции — без привязки к эталону.

Общие шаги:
1) Контейнеры
	- Проверить .container (max-width: 1170px) и убрать двойные обертки.
	- Исключения: Header/Footer/CTA, где используется один паттерн.
2) Кнопки
	- В контенте заменить длинные классы на .btn/.btn-primary/.btn-secondary/.btn-outline.
	- Не менять Header/Footer/Mobile.
3) CTA на черном фоне
	- CTA-блок внизу страницы: фон bg-dark, заголовок text-white.
	- Кнопки: .btn-primary и .btn-inverse.
4) Page Navigator (старый вариант)
	- Навигатор присутствует и работает при скролле.
5) Проверка и масштабирование
	- Все правки сначала на эталоне общего, затем перенос на страницы по порядку ниже.
	- Проверка только через Live Server.

ЧАСТЬ B. ИНДИВИДУАЛЬНЫЕ ПЛАНЫ (НАЧИНАЕМ С ГЛАВНОЙ)

1) Главная: src/html/index.html
	Цель: зафиксировать общий стиль и ключевые блоки страницы.
	Уникальные блоки (проверить/сохранить порядок и контент):
	- Hero с видео-фоном (desktop-only) и overlay.
	- Блок «Преимущества» (иконки, карточки).
	- Карусели/скролл-ленты (стили портретов, логотипы, работы — если есть).
	- Back-to-top.
	Индивидуальные проверки:
	- Ничего не ломать в Header/Footer.
	- SEO: canonical, meta description, robots (noindex во время разработки).
	- Изображения: корректные width/height, loading/decoding.

---------------------------------
КОМПОНЕНТ: КАРУСЕЛЬ (БАЗА + ВАРИАНТЫ)
Цель: единая техническая база для всех каруселей + модификаторы по размерам карточек и наличию подписей.

БАЗА (общая техника для всех страниц):
1) Контейнер прокрутки:
	- .carousel-scroll (обязателен, CSS и JS уже описаны в DESIGN_SYSTEM).
2) Трек карусели:
	- flex + gap + min-w-max (чтобы карточки не сжимались).
3) Карточка:
	- flex-shrink-0 + snap-center (обязательные).
4) Заголовок секции:
	- Может быть ссылкой (<a>) или обычным заголовком (<h2>/<h3>). На технику карусели не влияет.
5) JS:
	- Один общий скрипт drag/wheel/click protection для .carousel-scroll.
	- Не упрощать и не дублировать логику.

ВАРИАНТЫ (модификаторы по месту, без изменения контента):
A) carousel--cards-lg
	- Крупные карточки, без подписей.
	- Пример: src/html/pechat-na-kholste-sankt-peterburg.html

B) carousel--cards-md
	- Карточки среднего размера, подписи присутствуют.
	- Пример: src/html/info/info.html

C) carousel--tiles
	- Мини-карточки/лента (стили портретов на главной).
	- Пример: src/html/index.html

ПРОВЕРКА:
1) Скролл и drag работают на десктопе, скролл свайпом на мобиле.
2) Карточки не сжимаются, snap-center работает.
3) Заголовок может быть ссылкой или нет — поведение карусели не меняется.

---------------------------------
НОРМАЛИЗАЦИЯ ПОНЯТИЙ: СЕКЦИЯ / БЛОК / ПОДСЕКЦИЯ
Цель: единый язык описания структуры страницы при рефакторинге.

1) Секция (Section)
	- Верхнеуровневый смысловой блок страницы.
	- Обычно отдельный <section> с фоном/отступами и/или якорем (#id).
	- Именно секции участвуют в Page Navigator (inner-link).

2) Блок (Block)
	- Внутренняя часть секции (например: заголовок+описание, список карточек).
	- Может быть <div> или отдельный подблок внутри секции.
	- Не имеет собственного якоря, если не требуется навигация.

3) Подсекция (Subsection)
	- Логически самостоятельная часть внутри секции.
	- Допускается отдельный <div> с собственным заголовком (h3/h4).
	- Якорь только при явной необходимости навигации.

ПРАВИЛО:
- Не переименовывать секции/блоки, если это меняет структуру или порядок.
- Якоря (#id) сохранять 1:1 с оригиналом.

2) Портрет на холсте СПб: src/html/portret-na-zakaz-po-foto-na-kholste-sankt-peterburg.html
	Уникальные блоки:
	- Калькулятор, примеры, FAQ, блоки оплаты/доставки (если есть).
	- Видео/обложки видео (если есть).
	- Преимущества (иконки), характеристики, «Как заказать» — рассматривать локально.

3) Печать на холсте СПб: src/html/pechat-na-kholste-sankt-peterburg.html
	Уникальные блоки:
	- Калькулятор, варианты, примеры, FAQ (если есть).
	- Преимущества/характеристики/«Как заказать» — рассматривать локально.

4) Фото на холсте СПб: src/html/foto-na-kholste-sankt-peterburg.html
	Уникальные блоки:
	- Характеристики, варианты заказа, примеры, отзывы (если есть).
	- Преимущества/«Как заказать»/видео — рассматривать локально.
	- Навигацию привести к старому Page Navigator (не arch-nav).

5) Инфо: src/html/info/info.html
	Уникальные блоки:
	- Hero с Ken Burns/Typed.js, блоки «О студии», «Авторы», «Результаты в цифрах + видео»,
	  карусели, модалка видео, СМИ, примеры работ, контакты.
	- Проверка JSON-LD/скриптов страницы.

6) FAQ: src/html/info/faq.html
	Уникальные блоки:
	- FAQ (schema.org/FAQPage, details/summary), форма «Задать вопрос».
	- Не менять структуру schema и aria-атрибуты.
	План:
	- Заменить itemtype schema.org с http → https.

7) Контакты: src/html/info/kontakty.html
	Уникальные блоки:
	- Tabs (Москва/СПб), карты/iframe, контактные данные.
	- Проверка корректной работы табов.
	План:
	- Улучшить доступность табов: role/tablist, aria-selected, aria-controls, roving tabindex, клавиатурная навигация.
